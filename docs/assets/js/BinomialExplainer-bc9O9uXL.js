import{j as e,c as s,l as r}from"./index-KcelF3eC.js";import{r as a}from"./vendor-DbBg2l-y.js";import{f as t,C as d,r as i,p as n,q as l,R as o,L as c}from"./utils-CX-w3fk8.js";import"./charts-RsezmCs5.js";const x=({n:x,p:m,k:h})=>{const[b,p]=a.useState(0),[g,u]=a.useState(!1),[j,N]=a.useState(!1),v=(e,s,a)=>{if(s<0||s>e)return 0;if(0===a)return 0===s?1:0;if(1===a)return s===e?1:0;const t=r(e,s,a);if(!isFinite(t))return 0;const d=Math.exp(t);return isFinite(d)?d:0},k=(e,r,a)=>{if(a>=e)return 0;let t=0;const d=Math.min(e-a,50);for(let s=1;s<=d;s++){const d=v(e,a+s,r);if(isNaN(d)||!isFinite(d))break;t+=d}return e-a>50?s(e,r,a):t},f=[{title:"🎯 O Problema",content:`Temos ${x} tentativas independentes, cada uma com probabilidade ${(100*m).toFixed(1)}% de sucesso. Queremos calcular P(X > ${h}).`,visual:"problem"},{title:"📊 Distribuição Binomial",content:`X ~ Binomial(${x}, ${m.toFixed(3)}) significa que X pode assumir valores de 0 a ${x}, cada um com sua probabilidade específica.`,visual:"distribution"},{title:"🔢 Fórmula Binomial",content:"A fórmula da distribuição binomial nos permite calcular a probabilidade exata:",visual:"formula"},{title:"📈 Calculando P(X > ${k})",content:`P(X > ${h}) = P(X=${h+1}) + P(X=${h+2}) + ... + P(X=${x})`,visual:"calculation"},{title:"✅ Resultado Final",content:(()=>{const e=(100*k(x,m,h)).toFixed(4);return`A probabilidade de obter mais de ${h} sucessos em ${x} tentativas é ${e}%.`})(),visual:"result"}];return e.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.jsx("h2",{className:"text-xl font-semibold theme-text",children:"Explicação Passo-a-Passo"})]}),e.jsxs("button",{onClick:()=>N(!j),className:"text-xs px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 text-indigo-700 dark:text-indigo-300 rounded flex items-center gap-1 transition-colors",children:[e.jsx(d,{className:"w-3 h-3"}),j?"Ocultar":"Mostrar"," Fórmula"]})]}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-indigo-900 dark:text-indigo-100 mb-2",children:"📚 Fórmula da Distribuição Binomial:"}),e.jsx("div",{className:"text-center theme-card p-3 rounded border mb-3",children:e.jsx(i.BlockMath,{math:"P(X = k) = \\binom{n}{k} p^k (1-p)^{n-k}"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-indigo-800 dark:text-indigo-200",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"n:"})," número de tentativas (",x,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"k:"})," número de sucessos desejados"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p:"})," probabilidade de sucesso (",m.toFixed(3),")"]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[e.jsx(i.InlineMath,{math:"\\binom{n}{k}"}),":"]})," combinações de n, k a k"]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>{b>0&&p(b-1)},disabled:0===b,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 theme-text rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"← Anterior"}),e.jsxs("button",{onClick:()=>{if(u(!g),!g){const e=setInterval(()=>{p(s=>s>=f.length-1?(clearInterval(e),u(!1),0):s+1)},3e3)}},className:"flex items-center gap-1 px-3 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",children:[g?e.jsx(n,{className:"w-4 h-4"}):e.jsx(l,{className:"w-4 h-4"}),g?"Pausar":"Animar"]}),e.jsxs("button",{onClick:()=>{p(0),u(!1)},className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:[e.jsx(o,{className:"w-4 h-4"}),"Reset"]}),e.jsx("button",{onClick:()=>{b<f.length-1&&p(b+1)},disabled:b===f.length-1,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 theme-text rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Próximo →"})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:f.map((s,r)=>e.jsx("div",{className:"w-3 h-3 rounded-full cursor-pointer transition-colors "+(r===b?"bg-indigo-600 dark:bg-indigo-400":r<b?"bg-indigo-300 dark:bg-indigo-600":"bg-gray-300 dark:bg-gray-600"),onClick:()=>p(r)},r))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold theme-text mb-2",children:f[b].title}),e.jsx("p",{className:"theme-text-secondary",children:f[b].content})]}),e.jsx("div",{className:"mt-4",children:(s=>{switch(s){case"problem":return e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"🎯 Visualização do Problema"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Array.from({length:Math.min(x,20)},(s,r)=>e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold "+(Math.random()<m?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300"),children:r+1},r)),x>20&&e.jsx("span",{className:"theme-text-secondary",children:"..."})]}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:["Verde = Sucesso | Cinza = Falha | Queremos contar quando há mais de ",h," sucessos"]})]});case"distribution":return e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-700",children:[e.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-3",children:"📊 Valores Possíveis da Distribuição"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200 mb-2",children:[e.jsx("strong",{children:"Valores possíveis:"})," X ∈ {0, 1, 2, ..., ",x,"}"]}),e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200 mb-2",children:[e.jsx("strong",{children:"Valor esperado:"})," E[X] = n×p = ",x,"×",m.toFixed(3)," = ",(x*m).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Variância:"})," Var[X] = n×p×(1-p) = ",(x*m*(1-m)).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium theme-text mb-2",children:"Exemplos de probabilidades:"}),[0,1,Math.floor(x/2),x-1,x].slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between text-xs theme-text-secondary",children:[e.jsxs("span",{children:["P(X = ",s,")"]}),e.jsx("span",{children:v(x,s,m).toFixed(4)})]},s))]})]})]});case"formula":return e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700",children:[e.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-3",children:"🔢 Componentes da Fórmula"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"theme-card p-4 rounded border mb-3",children:e.jsx(i.BlockMath,{math:`P(X = x) = \\binom{${x}}{x} \\cdot ${m.toFixed(3)}^x \\cdot ${(1-m).toFixed(3)}^{${x}-x}`})}),e.jsxs("div",{className:"mt-3 text-sm text-purple-700 dark:text-purple-300 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e.jsx(i.InlineMath,{math:"\\\\binom{n}{x}"})})," = Combinações (maneiras de escolher x sucessos)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:e.jsx(i.InlineMath,{math:"p^x"})})," = Probabilidade dos x sucessos"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-red-600 dark:text-red-400",children:e.jsx(i.InlineMath,{math:"(1-p)^{n-x}"})})," = Probabilidade das (n-x) falhas"]})]})]})]});case"calculation":{const s=Array.from({length:Math.min(x-h,5)},(e,s)=>h+1+s),r=k(x,m,h);return e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700",children:[e.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-3",children:"📈 Cálculos Específicos"}),e.jsxs("div",{className:"space-y-2",children:[s.map(s=>{const r=v(x,s,m);return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"font-mono theme-text",children:["P(X = ",s,")"]}),e.jsx("span",{className:"text-orange-700 dark:text-orange-300",children:isFinite(r)?r.toExponential(3):"≈ 0"})]},s)}),x-h>5&&e.jsx("div",{className:"text-center theme-text-secondary",children:"..."}),e.jsx("div",{className:"border-t border-orange-300 dark:border-orange-600 pt-2 font-bold",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"theme-text",children:"Soma Total:"}),e.jsx("span",{className:"text-orange-800 dark:text-orange-200",children:isFinite(r)?r.toExponential(3):"≈ 0"})]})})]})]})}case"result":{const s=k(x,m,h);return e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[e.jsx("h4",{className:"font-semibold text-emerald-900 dark:text-emerald-100 mb-3",children:"✅ Resultado Final"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:[isFinite(s)?(100*s).toFixed(4):"≈ 0.0000","%"]}),e.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:["Probabilidade de obter mais de ",h," sucessos em ",x," tentativas"]}),e.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded border",children:[e.jsx("p",{className:"text-xs font-medium theme-text mb-2",children:"💡 Interpretação Prática:"}),e.jsx("div",{className:"space-y-2 text-xs theme-text-secondary",children:s>.001?e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"Se você repetir este experimento:"})}),e.jsxs("p",{children:["• Em ",e.jsxs("strong",{children:[x," tentativas"]})," com probabilidade ",e.jsxs("strong",{children:[(100*m).toFixed(2),"%"]})," cada"]}),e.jsxs("p",{children:["• Há ",e.jsxs("strong",{children:[(100*s).toFixed(4),"%"]})," de chance de obter ",e.jsxs("strong",{children:["mais de ",h," sucessos"]})]}),e.jsxs("p",{className:"pt-1 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("strong",{children:"Na prática:"})," Se você fizer este experimento ",e.jsx("strong",{children:"100 vezes"}),", espera obter mais de ",h," sucessos em aproximadamente ",e.jsxs("strong",{children:[Math.round(100*s)," dessas 100 repetições"]}),"."]}),s>.5&&e.jsxs("p",{className:"text-orange-600 dark:text-orange-400 text-xs",children:["⚡ ",e.jsx("em",{children:"Este resultado é bastante provável de acontecer!"})]}),s<.05&&s>.001&&e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["🔍 ",e.jsx("em",{children:"Este é um evento raro, mas não impossível."})]})]}):e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Este é um evento extremamente raro!"})}),e.jsx("p",{children:"A probabilidade é menor que 0.1% - quase impossível de acontecer na prática."}),e.jsxs("p",{className:"text-red-600 dark:text-red-400 text-xs mt-1",children:["⚠️ ",e.jsx("em",{children:"Você precisaria repetir o experimento milhares de vezes para ver este resultado."})]})]})})]})]})]})}default:return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"theme-text text-center",children:["Visualização não disponível para este tipo: ",s]})})}})(f[b].visual)})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(c,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:"💡 Contexto do Seu Problema"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Seu cenário:"})," ",x," tentativas com ",(100*m).toFixed(1),"% de chance de sucesso cada."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pergunta:"})," Qual a probabilidade de obter ",e.jsxs("em",{children:["mais de ",h]})," sucessos?"]}),e.jsxs("p",{className:"pt-2 border-t border-yellow-300 dark:border-yellow-600",children:[e.jsx("strong",{children:"Aplicações similares:"})," Controle de qualidade, pesquisas de opinião, análises médicas, testes A/B, e qualquer situação com tentativas independentes."]}),m<.1&&x>20&&e.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["⚡ ",e.jsx("strong",{children:"Dica:"})," Com p baixo (",(100*m).toFixed(1),"%) e n alto (",x,"), considere usar a aproximação de Poisson para cálculos mais rápidos!"]}),x*m>5&&x*(1-m)>5&&e.jsxs("p",{className:"text-purple-700 dark:text-purple-300",children:["⚡ ",e.jsx("strong",{children:"Dica:"})," Com np=",(x*m).toFixed(1)," e n(1-p)=",(x*(1-m)).toFixed(1),", ambos ",">"," 5, a aproximação Normal também funciona bem!"]})]})]})]})})]})};export{x as default};
