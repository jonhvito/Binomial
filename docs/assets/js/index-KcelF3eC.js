const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/AdditionalCharts-7wKvQ8b7.js","assets/js/vendor-DbBg2l-y.js","assets/js/charts-RsezmCs5.js","assets/js/utils-CX-w3fk8.js","assets/js/BinomialExplainer-bc9O9uXL.js","assets/js/InteractiveTutorial-CkMFwljL.js","assets/js/Glossary-BIXtlicf.js","assets/js/MobileChart-ByBkQYcn.js"])))=>i.map(i=>d[i]);
import{r as e,a as s,R as t}from"./vendor-DbBg2l-y.js";import{S as a,H as r,C as i,I as l,E as n,a as o,B as c,T as d,M as m,r as x,X as h,b as u,c as p,d as g,e as b,L as f,f as j,D as v,g as y,h as N,i as k,j as w,F as P,A as M,k as C,l as S,R as E,G as I,m as A,n as _,o as q}from"./utils-CX-w3fk8.js";import{C as D,a as O,L as T,B as U,p as $,b as z,c as F,d as L}from"./charts-RsezmCs5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var R={exports:{}},B={},X=e,V=Symbol.for("react.element"),G=Symbol.for("react.fragment"),H=Object.prototype.hasOwnProperty,Q=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W={key:!0,ref:!0,__self:!0,__source:!0};function K(e,s,t){var a,r={},i=null,l=null;for(a in void 0!==t&&(i=""+t),void 0!==s.key&&(i=""+s.key),void 0!==s.ref&&(l=s.ref),s)H.call(s,a)&&!W.hasOwnProperty(a)&&(r[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:V,type:e,key:i,ref:l,props:r,_owner:Q.current}}B.Fragment=G,B.jsx=K,B.jsxs=K,R.exports=B;var J,Z=R.exports,Y=s;J=Y.createRoot,Y.hydrateRoot;const ee={},se=function(e,s,t){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(s.map(e=>{if((e=function(e){return"/Binomial/"+e}(e))in ee)return;ee[e]=!0;const s=e.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=s?"stylesheet":"modulepreload",s||(r.as="script"),r.crossOrigin="",r.href=e,t&&r.setAttribute("nonce",t),document.head.appendChild(r),s?new Promise((s,t)=>{r.addEventListener("load",s),r.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return a.then(s=>{for(const e of s||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},te=(e,s,t)=>{if(0===t)return 0===s?0:-1/0;if(1===t)return s===e?0:-1/0;const a=((e,s)=>{if(s>e||s<0)return-1/0;if(0===s||s===e)return 0;let t=0;for(let a=1;a<=Math.min(s,e-s);a++)t+=Math.log(e-a+1)-Math.log(a);return t})(e,s);return a+(s*Math.log(t)+(e-s)*Math.log(1-t))},ae=(e,s,t)=>{if(0===s||t>=e)return 0;if(1===s)return t<e?1:0;const a=1-s;let r=Math.exp(e*Math.log(a)),i=r;const l=s/a;for(let n=1;n<=t&&(r*=(e-n+1)/n*l,i+=r,isFinite(r));n++);return Math.max(0,1-i)},re=(e,s,t)=>{const a=e*s,r=e*s*(1-s),i=a>=5&&e*(1-s)>=5,l=a>=10&&e*(1-s)>=10;if(!(a>=1&&e*(1-s)>=1)||0===r)return{value:0,valid:!1,calculable:!1};const n=(t+.5-a)/Math.sqrt(r),o=Math.max(0,(e=>{const s=Math.abs(e)/Math.SQRT2,t=1/(1+.5*s),a=t*Math.exp(-s*s-1.26551223+t*(1.00002368+t*(.37409196+t*(.09678418+t*(t*(.27886807+t*(t*(1.48851587+t*(.17087277*t-.82215223))-1.13520398))-.18628806)))));return.5*(e>=0?a:2-a)})(n));return{value:o,valid:l,calculable:i}},ie=(e,s,t)=>{const a=ae(e,s,t),r=((e,s,t)=>{const a=e*s;if(0===a)return 0;let r=Math.exp(-a),i=r;for(let l=1;l<=t&&(r*=a/l,i+=r,isFinite(r));l++);return Math.max(0,1-i)})(e,s,t),i=re(e,s,t),l=a>0?100*Math.abs((r-a)/a):100*Math.abs(r-a),n=i.value>0?a>0?100*Math.abs((i.value-a)/a):100*Math.abs(i.value-a):0;return{exact:a,poisson:r,normal:i.value,poissonError:l,normalError:n,normalValid:i.valid,normalCalculable:i.calculable,mean:e*s,stdDev:Math.sqrt(e*s*(1-s))}},le=()=>{const[s,t]=e.useState(100),[a,r]=e.useState(.02),[i,l]=e.useState(5),[n,o]=e.useState(!0),[c,d]=e.useState(!0),m=e.useMemo(()=>((e,s,t)=>e>=1&&e<=1e5&&s>=0&&s<=1&&t>=0&&t<=e)(s,a,i),[s,a,i]),x=e.useMemo(()=>((e,s,t)=>{const a=[];return e<1?a.push("O número de tentativas (n) deve ser pelo menos 1. Pense em pelo menos uma tentativa!"):e>1e5&&a.push("O número de tentativas (n) é muito grande. Use valores até 100.000 para evitar problemas de performance."),(s<0||s>1)&&a.push("A probabilidade de sucesso (p) deve estar entre 0 e 1. Por exemplo: 0.5 significa 50% de chance."),t<0?a.push("O limite superior (k) deve ser um número não-negativo. Não faz sentido procurar por menos de 0 sucessos!"):t>e&&a.push(`O limite superior (k=${t}) não pode ser maior que o número de tentativas (n=${e}). Você não pode ter mais sucessos que tentativas!`),a})(s,a,i),[s,a,i]),h=e.useMemo(()=>m?ie(s,a,i):{exact:0,poisson:0,normal:0,poissonError:0,normalError:0,normalValid:!1,normalCalculable:!1,mean:0,stdDev:0},[s,a,i,m]),u=e.useMemo(()=>m?((e,s,t,a)=>{const r=[];e<10?r.push("Com poucos ensaios (n < 10), a distribuição binomial pode ser bastante irregular. Considere aumentar n para uma melhor aproximação."):e>1e3&&r.push("Com muitos ensaios (n > 1000), considere usar a aproximação Normal se as condições forem atendidas."),s<.01?r.push("Probabilidade muito baixa (p < 0.01). A distribuição Poisson pode ser uma excelente aproximação!"):s>.99?r.push("Probabilidade muito alta (p > 0.99). Isso é como procurar falhas em um sistema muito confiável."):.5===s&&r.push("Probabilidade de 50% cria uma distribuição simétrica. A média e a mediana coincidem!");const i=e*s;t<.5*i?r.push("k está bem abaixo da média. Você está procurando por um evento muito improvável!"):t>1.5*i&&r.push("k está bem acima da média. Isso pode indicar um evento bastante provável.");const l=e*s;l<10&&l>0&&r.push("λ = n×p < 10. A aproximação Poisson é recomendada para este cenário.");const n=e*s>=10,o=e*(1-s)>=10;return n&&o?r.push("As condições para a aproximação Normal estão satisfeitas (np ≥ 10 e n(1-p) ≥ 10)."):n?o||r.push("n(1-p) < 10. A aproximação Normal pode não ser confiável."):r.push("np < 10. A aproximação Normal pode não ser confiável."),a>.5?r.push("Probabilidade alta (>50%). Este evento é mais provável de acontecer do que não acontecer!"):a<.01&&r.push("Probabilidade muito baixa (<1%). Este é um evento raro!"),r})(s,a,i,h.exact):[],[s,a,i,h.exact,m]),p=e.useMemo(()=>{if(!m)return null;const e=((e,s,t,a=300)=>{const r=Math.min(e,Math.min(t+20,a)),i=[];if(0===s){for(let e=0;e<=r;e++)i.push({x:e,probability:0===e?1:0});return i}if(1===s){for(let s=0;s<=r;s++)i.push({x:s,probability:s===e?1:0});return i}for(let l=0;l<=r;l++){const t=te(e,l,s),a=t!==-1/0?Math.exp(t):0;i.push({x:l,probability:a})}return i})(s,a,i),t=e.map(e=>e.probability);return{labels:e.map(e=>e.x.toString()),datasets:[{label:"P(X = x)",data:t,backgroundColor:e.map(e=>e.x>i?"#F97316":"#3B82F6"),borderColor:e.map(e=>e.x>i?"#EA580C":"#2563EB"),borderWidth:1}],binomial:t,poisson:[...t],normal:[...t]}},[s,a,i,m]);return{n:s,p:a,k:i,showPoisson:n,showNormal:c,setN:t,setP:r,setK:l,setShowPoisson:o,setShowNormal:d,validInput:m,validationErrors:x,results:h,smartTips:u,chartData:p,applyPreset:(e,s,a)=>{if("object"==typeof e)return t(e.n),r(e.p),void l(e.k);"number"==typeof s&&"number"==typeof a&&(t(e),r(s),l(a))}}},ne=(s={})=>{const{threshold:t=.1,rootMargin:a="50px",triggerOnce:r=!0}=s,[i,l]=e.useState(!1),[n,o]=e.useState(!1),c=e.useRef(null);return e.useEffect(()=>{const e=c.current;if(!e)return;if(n&&r)return;const s=new IntersectionObserver(([t])=>{t.isIntersecting?(l(!0),r&&(o(!0),s.unobserve(e))):r||l(!1)},{threshold:t,rootMargin:a});return s.observe(e),()=>{s.unobserve(e)}},[t,a,r,n]),{elementRef:c,isVisible:i}},oe=(s,t)=>{const[a,r]=e.useState(s);return e.useEffect(()=>{const e=setTimeout(()=>{r(s)},t);return()=>{clearTimeout(e)}},[s,t]),a},ce=({n:e,p:s,k:t,onNChange:i,onPChange:l,onKChange:n,onOpenModal:o})=>Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-4 lg:p-6 w-full max-w-full overflow-hidden",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-6",children:[Z.jsx(a,{className:"w-4 h-4 lg:w-5 lg:h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),Z.jsx("h2",{className:"text-lg lg:text-xl font-semibold theme-text",children:"Parâmetros"})]}),Z.jsxs("div",{className:"space-y-4 lg:space-y-6 w-full",children:[Z.jsxs("div",{className:"w-full",children:[Z.jsxs("label",{className:"block text-sm font-medium theme-text-secondary mb-2 flex items-center gap-2 w-full",children:[Z.jsxs("span",{children:["Número de tentativas (n): ",e]}),Z.jsx("button",{onClick:()=>o("n"),className:"text-blue-500 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors touch-manipulation flex-shrink-0",title:"Explicação sobre n",children:Z.jsx(r,{className:"w-4 h-4"})})]}),Z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 lg:gap-4 w-full",children:[Z.jsx("input",{type:"range",min:"1",max:"1000",value:e,onChange:e=>i(parseInt(e.target.value)),className:"sm:col-span-2 w-full h-3 lg:h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer touch-manipulation","aria-label":"Número de tentativas n"}),Z.jsx("input",{type:"number",min:"1",max:"100000",value:e,onChange:e=>i(Math.max(1,parseInt(e.target.value)||1)),className:"px-3 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 theme-card theme-text text-center sm:text-left touch-manipulation w-full min-w-0"})]})]}),Z.jsxs("div",{className:"w-full",children:[Z.jsxs("label",{className:"block text-sm font-medium theme-text-secondary mb-2 flex items-center gap-2 w-full",children:[Z.jsxs("span",{children:["Probabilidade de sucesso (p): ",s.toFixed(3)]}),Z.jsx("button",{onClick:()=>o("p"),className:"text-blue-500 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors touch-manipulation flex-shrink-0",title:"Explicação sobre p",children:Z.jsx(r,{className:"w-4 h-4"})})]}),Z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 lg:gap-4 w-full",children:[Z.jsx("input",{type:"range",min:"0",max:"1",step:"0.001",value:s,onChange:e=>l(parseFloat(e.target.value)),className:"sm:col-span-2 w-full h-3 lg:h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer touch-manipulation","aria-label":"Probabilidade de sucesso p"}),Z.jsx("input",{type:"number",min:"0",max:"1",step:"0.001",value:s,onChange:e=>l(Math.max(0,Math.min(1,parseFloat(e.target.value)||0))),className:"px-3 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 theme-card theme-text text-center sm:text-left touch-manipulation w-full min-w-0"})]})]}),Z.jsxs("div",{className:"w-full",children:[Z.jsxs("label",{className:"block text-sm font-medium theme-text-secondary mb-2 flex items-center gap-2 w-full",children:[Z.jsxs("span",{children:["Limite superior (k): ",t]}),Z.jsx("button",{onClick:()=>o("k"),className:"text-blue-500 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors touch-manipulation flex-shrink-0",title:"Explicação sobre k",children:Z.jsx(r,{className:"w-4 h-4"})})]}),Z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 lg:gap-4 w-full",children:[Z.jsx("input",{type:"range",min:"0",max:Math.min(e,100),value:t,onChange:e=>n(parseInt(e.target.value)),className:"sm:col-span-2 w-full h-3 lg:h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer touch-manipulation","aria-label":"Limite superior k"}),Z.jsx("input",{type:"number",min:"0",max:e,value:t,onChange:s=>n(Math.max(0,Math.min(e,parseInt(s.target.value)||0))),className:"px-3 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 theme-card theme-text text-center sm:text-left touch-manipulation w-full min-w-0"})]})]})]})]}),de=[{n:100,p:.02,k:5,title:"Controle de Qualidade",description:"Probabilidade de mais de 5 peças defeituosas em 100",color:"blue",emoji:"🏭"},{n:20,p:.3,k:8,title:"Futebol",description:"Probabilidade de mais de 8 chutes resultando em gol em 20 tentativas",color:"teal",emoji:"⚽"},{n:50,p:.85,k:40,title:"Exames",description:"Probabilidade de mais de 40 alunos passando em 50",color:"green",emoji:"📚"},{n:1e3,p:.001,k:3,title:"Bugs em Software",description:"Probabilidade de mais de 3 bugs em 1000 linhas de código",color:"purple",emoji:"💻"},{n:500,p:.002,k:2,title:"Epidemiologia",description:"Probabilidade de mais de 2 casos positivos em 500 testes",color:"orange",emoji:"🦠"},{n:200,p:.05,k:15,title:"Eventos Raros",description:"Probabilidade de mais de 15 sucessos em 200 tentativas",color:"red",emoji:"🎲"},{n:30,p:.1,k:5,title:"Arremessos Livres",description:"Probabilidade de mais de 5 cestas em 30 arremessos livres",color:"indigo",emoji:"🎯"},{n:100,p:.95,k:90,title:"Voos Pontuais",description:"Probabilidade de mais de 90 voos pontuais em 100",color:"pink",emoji:"✈️"},{n:60,p:.15,k:12,title:"Loteria",description:"Probabilidade de mais de 12 números sorteados em 60",color:"cyan",emoji:"🍀"}],me=({onApplyPreset:e})=>Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-4 lg:p-6 w-full max-w-full overflow-hidden",children:[Z.jsx("h3",{className:"text-lg font-semibold theme-text mb-3 lg:mb-4",children:"Cenários Práticos"}),Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4 w-full",children:de.map((s,t)=>Z.jsx("button",{onClick:()=>e(s.n,s.p,s.k),className:`px-3 lg:px-4 py-4 lg:py-3 ${xe(s.color)} hover:opacity-90 text-white rounded-lg transition-colors duration-200 font-medium text-sm touch-manipulation w-full min-w-0`,title:`Aplicar cenário ${s.title}`,children:Z.jsxs("div",{className:"text-center w-full",children:[Z.jsxs("div",{className:"truncate",children:[s.emoji," ",s.title]}),Z.jsxs("div",{className:"text-xs opacity-90 mt-1",children:["n=",s.n,", p=",s.p,", k=",s.k]})]})},t))}),Z.jsx("div",{className:"mt-3 lg:mt-4 space-y-1 lg:space-y-2 text-xs lg:text-sm theme-text-secondary hidden sm:block w-full",children:de.map((e,s)=>Z.jsxs("div",{className:"flex items-start gap-2 w-full",children:[Z.jsx("span",{className:`text-${e.color}-600 dark:text-${e.color}-400 flex-shrink-0`,children:e.emoji}),Z.jsx("span",{className:"flex-1 min-w-0",children:e.description})]},s))})]}),xe=e=>({blue:"bg-blue-600 hover:bg-blue-700",teal:"bg-teal-600 hover:bg-teal-700",green:"bg-green-600 hover:bg-green-700",purple:"bg-purple-600 hover:bg-purple-700",orange:"bg-orange-600 hover:bg-orange-700",red:"bg-red-600 hover:bg-red-700",indigo:"bg-indigo-600 hover:bg-indigo-700",pink:"bg-pink-600 hover:bg-pink-700",cyan:"bg-cyan-600 hover:bg-cyan-700"}[e]||"bg-gray-600 hover:bg-gray-700"),he=({showPoisson:e,showNormal:s,onShowPoissonChange:t,onShowNormalChange:a})=>Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-6",children:[Z.jsx("h3",{className:"text-lg font-semibold theme-text mb-4",children:"Aproximações"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("label",{className:"flex items-center",children:[Z.jsx("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked),className:"mr-3 h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 dark:border-gray-600 rounded"}),Z.jsx("span",{className:"theme-text-secondary",children:"Mostrar Aproximação de Poisson"})]}),Z.jsxs("label",{className:"flex items-center",children:[Z.jsx("input",{type:"checkbox",checked:s,onChange:e=>a(e.target.checked),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 dark:border-gray-600 rounded"}),Z.jsx("span",{className:"theme-text-secondary",children:"Mostrar Aproximação de Normal"})]})]})]}),ue=(e,s=2)=>!Number.isFinite(e)||e<=0?"0.00%":`${(100*e).toFixed(s)}%`,pe=e=>{const s=ue(e);return e>0&&e<.001?`≈${s}`:s},ge=e=>{const s=(e=>Number.isFinite(e)?e<=0?0:e<.01?100*e:e:0)(e);return`${s.toFixed(2)}%`},be=e=>Number.isFinite(e)?e.toFixed(1):"0.0",fe=({validInput:e,validationErrors:s,results:t,showPoisson:a,showNormal:l,k:n,onOpenModal:o,smartTips:c})=>Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-6",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[Z.jsx(i,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),Z.jsxs("h2",{className:"text-xl font-semibold theme-text",children:["Resultados: P(X > ",n,")"]})]}),e?Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[Z.jsx("div",{className:"flex justify-between items-center mb-2",children:Z.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100 flex items-center gap-2",children:["Binomial Exato",Z.jsx("button",{onClick:()=>o("binomial"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",title:"Sobre distribuição binomial",children:Z.jsx(r,{className:"w-4 h-4"})})]})}),Z.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:ue(t.exact)})]}),a&&Z.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border-l-4 border-teal-500 p-4 rounded-r-lg",children:Z.jsxs("div",{className:"flex justify-between items-center",children:[Z.jsxs("div",{children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Z.jsx("span",{className:"font-medium text-teal-900 dark:text-teal-100",children:"Aproximação Poisson"}),t.mean<10&&Z.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200 rounded-full font-medium",children:"Recomendado"}),Z.jsx("button",{onClick:()=>o("poisson"),className:"text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300 transition-colors",title:"Sobre Aproximação de Poisson",children:Z.jsx(r,{className:"w-4 h-4"})})]}),Z.jsxs("div",{className:"text-sm text-teal-700 dark:text-teal-200",children:["λ = np = ",t.mean.toFixed(3)]})]}),Z.jsxs("div",{className:"text-right",children:[Z.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-300",children:pe(t.poisson)}),Z.jsxs("div",{className:"text-sm text-teal-700 dark:text-teal-200",children:["Erro: ",Z.jsx("span",{className:"font-medium",children:ge(t.poissonError)})]})]})]})}),l&&Z.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-4 rounded-r-lg",children:Z.jsxs("div",{className:"flex justify-between items-center",children:[Z.jsxs("div",{children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Z.jsx("span",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Aproximação Normal"}),t.normalValid?Z.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200 rounded-full font-medium",children:"✓ Recomendado"}):t.normalCalculable?Z.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-200 rounded-full font-medium",children:"⚡ Aceitável"}):t.normal>0?Z.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-200 rounded-full font-medium",children:"⚠ Inadequado"}):Z.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-900/50 text-gray-700 dark:text-gray-200 rounded-full font-medium",children:"N/A"}),Z.jsx("button",{onClick:()=>o("normal"),className:"text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300 transition-colors",title:"Sobre Aproximação de Normal",children:Z.jsx(r,{className:"w-4 h-4"})})]}),Z.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-200",children:["μ = ",t.mean.toFixed(2),", σ = ",t.stdDev.toFixed(2)]}),!t.normalValid&&t.normalCalculable&&Z.jsxs("div",{className:"text-sm text-yellow-600 dark:text-yellow-300 mt-1",children:[Z.jsxs("p",{children:["⚠ ",Z.jsx("strong",{children:"Aproximação aceitável mas não ideal."})]}),Z.jsx("p",{className:"text-xs mt-1",children:"Para melhor precisão, np e n(1-p) deveriam ser ≥ 10. Com seus valores atuais, a curva Normal pode não aproximar perfeitamente a distribuição binomial."})]}),!t.normalCalculable&&t.normal>0&&Z.jsxs("div",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:[Z.jsxs("p",{children:["⚠ ",Z.jsx("strong",{children:"Aproximação inadequada - Use apenas para comparação educacional!"})]}),Z.jsxs("p",{className:"text-xs mt-1",children:[Z.jsx("strong",{children:"Por que não é adequado:"})," Quando np ou n(1-p) são muito pequenos (","<",'5), a distribuição binomial é muito "pontuda" e assimétrica, mas a Normal é sempre simétrica e suave. É como tentar aproximar uma escada com uma rampa - não funciona bem!']}),Z.jsxs("p",{className:"text-xs mt-1",children:[Z.jsx("strong",{children:"O resultado abaixo pode estar muito incorreto."})," Use apenas para entender por que essa aproximação falha neste caso."]})]})]}),Z.jsxs("div",{className:"text-right",children:[Z.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-300",children:t.normal>0?pe(t.normal):"N/A"}),t.normal>0&&Z.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-200",children:["Erro: ",Z.jsx("span",{className:"font-medium",children:ge(t.normalError)}),!t.normalCalculable&&t.normal>0&&Z.jsx("span",{className:"text-red-500 dark:text-red-400 block text-xs",children:"(Muito impreciso!)"})]})]})]})}),Z.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-medium theme-text mb-2",children:"Estatísticas"}),Z.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Z.jsxs("div",{children:[Z.jsx("span",{className:"theme-text-secondary",children:"Média"}),Z.jsx("span",{className:"ml-2 font-medium theme-text",children:be(t.mean)})]}),Z.jsxs("div",{children:[Z.jsx("span",{className:"theme-text-secondary",children:"Desvio Padrão"}),Z.jsx("span",{className:"ml-2 font-medium theme-text",children:be(t.stdDev)})]})]})]}),e&&c.length>0&&Z.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[Z.jsxs("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[Z.jsx(r,{className:"w-4 h-4"}),"Dicas"]}),Z.jsx("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:c.slice(0,3).map((e,s)=>Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"💡"}),Z.jsx("span",{children:e})]},s))})]})]}):Z.jsxs("div",{className:"text-center py-8",children:[Z.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-4",children:[Z.jsx("p",{className:"text-red-600 dark:text-red-300 font-medium mb-2",children:"Parâmetros inválidos!"}),Z.jsx("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:s.map((e,s)=>Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-red-500 dark:text-red-400 mt-1",children:"•"}),Z.jsx("span",{children:e})]},s))})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Ajuste os parâmetros acima para continuar com os cálculos."})]})]}),je=({k:s})=>{const[t,a]=e.useState(!1);return Z.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 border theme-border",children:[Z.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Z.jsxs("h3",{className:"text-sm font-semibold theme-text flex items-center gap-2",children:[Z.jsx(l,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),"Legenda do Gráfico"]}),Z.jsxs("button",{onClick:()=>a(!t),className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 text-blue-700 dark:text-blue-300 rounded flex items-center gap-1 transition-colors",children:[t?Z.jsx(n,{className:"w-3 h-3"}):Z.jsx(o,{className:"w-3 h-3"}),t?"Ocultar":"Explicação"]})]}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{className:"flex flex-col gap-2",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded shadow-sm"}),Z.jsxs("span",{className:"text-sm theme-text-secondary",children:[Z.jsx("strong",{children:"Azul:"})," Valores ≤ ",s," (não excedem o limite)"]})]}),Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded shadow-sm"}),Z.jsxs("span",{className:"text-sm theme-text-secondary",children:[Z.jsx("strong",{children:"Laranja:"})," Valores > ",s," (excedem o limite)"]})]})]}),t&&Z.jsxs("div",{className:"mt-4 p-3 theme-card border border-blue-200 dark:border-blue-800 rounded-lg",children:[Z.jsx("h4",{className:"text-sm font-semibold theme-text mb-2",children:"📊 Como interpretar:"}),Z.jsxs("ul",{className:"text-xs theme-text-secondary space-y-1",children:[Z.jsxs("li",{children:["• ",Z.jsx("strong",{children:"Altura das barras:"})," Representa a probabilidade P(X = x)"]}),Z.jsxs("li",{children:["• ",Z.jsx("strong",{children:"Barras azuis:"})," Probabilidades que NÃO nos interessam (≤ ",s,")"]}),Z.jsxs("li",{children:["• ",Z.jsx("strong",{children:"Barras laranjas:"})," Probabilidades que QUEREMOS (> ",s,")"]}),Z.jsxs("li",{children:["• ",Z.jsx("strong",{children:"Soma das barras laranjas:"})," É o resultado final P(X > ",s,")"]})]}),Z.jsx("div",{className:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded",children:Z.jsxs("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[Z.jsx("strong",{children:"💡 Dica:"})," Quando o gráfico tem mais barras laranjas à direita, significa maior probabilidade de ter muitos sucessos!"]})})]})]})]})};var ve=Object.defineProperty,ye=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,we=(e,s,t)=>s in e?ve(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Pe=(e,s)=>{for(var t in s||(s={}))Ne.call(s,t)&&we(e,t,s[t]);if(ye)for(var t of ye(s))ke.call(s,t)&&we(e,t,s[t]);return e};D.register(O,T,U,$,z,F);const Me=({validInput:s,chartData:t,n:a,p:r,k:i})=>{const[n,x]=e.useState(!1),[h,u]=e.useState("normal"),[p,g]=e.useState(!1),b=document.documentElement.classList.contains("dark"),f=e.useMemo(()=>{if(!t||!s)return null;const e=t.datasets[0].data,l=a*r,n=a*r*(1-r),o=Math.sqrt(n);let c=0,d=0;e.forEach((e,s)=>{e>c&&(c=e,d=s)});const m=e.slice(0,i+1).reduce((e,s)=>e+s,0),x=1-m;return{mean:l.toFixed(2),stdDev:o.toFixed(2),mode:d,maxProb:c.toFixed(6),cumulativeUpToK:(100*m).toFixed(2),probabilityOverK:(100*x).toFixed(4)}},[t,s,a,r,i]),j=e.useMemo(()=>{if(!t)return null;if("focus"===h){const e=Pe({},t);return e.datasets=t.datasets.map(e=>{const s=Pe({},e),t=[],a=[];return e.data.forEach((e,s)=>{s>i?(t.push(s===i+1?"rgba(255, 165, 0, 0.8)":"rgba(255, 140, 0, 0.7)"),a.push(s===i+1?"rgba(255, 140, 0, 1)":"rgba(255, 100, 0, 1)")):(t.push("rgba(59, 130, 246, 0.15)"),a.push("rgba(59, 130, 246, 0.4)"))}),s.backgroundColor=t,s.borderColor=a,s.borderWidth=e.data.map((e,s)=>s>i?3:1),s}),e}return t},[t,h,i]),v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:b?"#e5e7eb":"#374151",padding:20,usePointStyle:!0,font:{size:12,weight:"bold"}}},title:{display:!0,text:"focus"===h?[`🎯 MODO FOCO: Calculando P(X > ${i})`,"Área LARANJA = nossa resposta | Área azul = não conta no cálculo"]:[`📊 Distribuição Binomial: B(${a}, ${r.toFixed(3)})`,`🎯 Destacando valores > ${i} (nossa área de interesse)`],color:b?"#f3f4f6":"#1f2937",font:{size:"focus"===h?13:14,weight:"bold"},padding:{top:10,bottom:20}},tooltip:{backgroundColor:b?"#1f2937":"#ffffff",titleColor:b?"#f3f4f6":"#1f2937",bodyColor:b?"#e5e7eb":"#374151",borderColor:b?"#6b7280":"#e5e7eb",borderWidth:2,cornerRadius:8,displayColors:!0,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},callbacks:{title:function(e){return`X = ${Number(e[0].label)}`},label:function(e){const s=e.parsed.y,t=Number(e.label),a=(100*s).toFixed(4),r=t>i;return"focus"===h?[`P(X = ${t}) = ${s.toFixed(6)} (${a}%)`,r?"🎯 ESTA BARRA FAZ PARTE DO CÁLCULO!":"❌ Esta barra NÃO entra no cálculo"]:[`Probabilidade: ${s.toFixed(6)} (${a}%)`,r?"🎯 Faz parte do nosso cálculo!":"📊 Não faz parte do cálculo"]},afterLabel:function(e){const s=Number(e.label),t=[];if(f&&s===f.mode&&t.push("⭐ Este é o valor mais provável (moda)!"),"focus"===h){s>i?t.push("🔍 ÁREA FOCADA: Faz parte do cálculo"):t.push("🔍 Área desfocada (não relevante)")}return t}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"📈 Probabilidade P(X = x)",color:b?"#e5e7eb":"#374151",font:{size:13,weight:"bold"}},ticks:{color:b?"#d1d5db":"#6b7280",font:{size:11},callback:function(e){return(100*Number(e)).toFixed(2)+"%"}},grid:{color:b?"#374151":"#f3f4f6",lineWidth:1}},x:{title:{display:!0,text:"🎲 Número de Sucessos (X)",color:b?"#e5e7eb":"#374151",font:{size:13,weight:"bold"}},ticks:{color:b?"#d1d5db":"#6b7280",font:{size:11},callback:function(e){const s=Number(e);return s===i?`${s} (limite)`:f&&s===parseInt(f.mode.toString())?`${s} (moda)`:s.toString()}},grid:{color:b?"#374151":"#f3f4f6",lineWidth:1}}},onHover:(e,s)=>{var t;const a=null==(t=e.native)?void 0:t.target;a&&s.length>0?a.style.cursor="pointer":a&&(a.style.cursor="default")}};return Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow p-6",children:[Z.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(c,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),Z.jsx("h2",{className:"text-xl font-semibold theme-text",children:"Distribuição da Probabilidade"})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsxs("button",{onClick:()=>u("normal"===h?"focus":"normal"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+("focus"===h?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),title:"Destacar área de interesse",children:[Z.jsx(d,{className:"w-4 h-4"}),"Focar"]}),Z.jsxs("button",{onClick:()=>x(!n),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+(n?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),title:"Mostrar estatísticas detalhadas",children:[Z.jsx(l,{className:"w-4 h-4"}),"Stats"]}),Z.jsxs("button",{onClick:()=>g(!p),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors",title:"Expandir gráfico",children:[Z.jsx(m,{className:"w-820 h-8"}),p?"Compactar":"Expandir"]})]})]}),n&&f&&Z.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Z.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[Z.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"📊 Média (μ)"}),Z.jsx("div",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:f.mean})]}),Z.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg border border-purple-200 dark:border-purple-800",children:[Z.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"📏 Desvio Padrão (σ)"}),Z.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:f.stdDev})]}),Z.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-200 dark:border-green-800",children:[Z.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"⭐ Moda"}),Z.jsxs("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:[f.mode," (",(100*parseFloat(f.maxProb)).toFixed(2),"%)"]})]}),Z.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:[Z.jsxs("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:["🎯 P(X ",">"," ",i,")"]}),Z.jsxs("div",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:[f.probabilityOverK,"%"]})]})]}),"focus"===h&&s&&j&&Z.jsx("div",{className:"mb-4 p-4 bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 rounded-r-lg",children:Z.jsxs("div",{className:"flex items-start gap-2",children:[Z.jsx(d,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-2",children:"🎯 Modo Foco Ativo - Entenda o Cálculo!"}),Z.jsxs("div",{className:"text-sm text-orange-800 dark:text-orange-200 space-y-2",children:[Z.jsxs("p",{children:[Z.jsx("strong",{children:"Estamos calculando:"})," P(X ",">"," ",i,") = probabilidade de ter MAIS de ",i," sucessos"]}),Z.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),Z.jsxs("span",{className:"text-xs",children:["Barras LARANJAS = entram no cálculo (X ",">"," ",i,")"]})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("div",{className:"w-4 h-4 bg-blue-300 rounded opacity-40"}),Z.jsxs("span",{className:"text-xs",children:["Barras azuis claras = NÃO entram (X ≤ ",i,")"]})]})]}),Z.jsxs("p",{className:"text-xs mt-2 font-medium",children:["💡 A soma de todas as barras laranjas = ",null==f?void 0:f.probabilityOverK,"% (nosso resultado!)"]})]})]})]})}),s&&j?Z.jsxs("div",{className:(p?"h-96":"h-80")+" transition-all duration-300",children:[Z.jsx(L,{data:j,options:v}),Math.min(a,i+20,300)<Math.min(a,i+20)&&Z.jsxs("p",{className:"mt-2 text-xs theme-text-secondary flex items-center gap-1",children:[Z.jsx(o,{className:"w-3 h-3"}),"Exibindo apenas os primeiros 300 valores de x para otimização."]})]}):Z.jsx("div",{className:(p?"h-96":"h-80")+" flex items-center justify-center theme-text-secondary",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx(c,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),Z.jsx("p",{children:"Aguardando parâmetros válidos..."}),Z.jsx("p",{className:"text-xs mt-1",children:"Ajuste n, p e k para visualizar a distribuição"})]})}),Z.jsx(je,{k:i})]})},Ce=e=>{switch(e){case"n":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Número de tentativas (n)"})," representa o tamanho da amostra ou o número total de experimentos independentes que serão realizados."]}),Z.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Exemplos:"}),Z.jsxs("ul",{className:"list-disc list-inside text-blue-800 dark:text-blue-200 space-y-1",children:[Z.jsx("li",{children:"100 peças em um lote de produção"}),Z.jsx("li",{children:"20 chutes a gol em uma partida"}),Z.jsx("li",{children:"50 alunos em uma turma"})]})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Quanto maior o n, mais confiável será a distribuição binomial."})]});case"p":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Probabilidade de sucesso (p)"})," é a chance de ocorrência do evento de interesse em cada tentativa independente."]}),Z.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"Exemplos:"}),Z.jsxs("ul",{className:"list-disc list-inside text-green-800 dark:text-green-200 space-y-1",children:[Z.jsx("li",{children:"0.02 (2%) = probabilidade de uma peça ser defeituosa"}),Z.jsx("li",{children:"0.30 (30%) = probabilidade de um chute resultar em gol"}),Z.jsx("li",{children:"0.85 (85%) = probabilidade de um aluno passar no exame"})]})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Deve estar entre 0 e 1. Valores próximos de 0 ou 1 indicam distribuições assimétricas."})]});case"k":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Limite superior (k)"})," define o valor limite para calcular P(X > k) - a probabilidade de obter mais de k sucessos."]}),Z.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"Interpretação:"}),Z.jsx("p",{className:"text-purple-800 dark:text-purple-200",children:"Se k = 5, estamos calculando a probabilidade de obter 6 ou mais sucessos."})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Deve ser menor ou igual a n. Valores baixos de k indicam eventos raros."})]});case"binomial":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Distribuição Binomial"})," modela o número de sucessos em n tentativas independentes, cada uma com probabilidade p de sucesso."]}),Z.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-indigo-900 dark:text-indigo-100 mb-2",children:"Fórmula:"}),Z.jsx("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded border",children:Z.jsx(x.BlockMath,{math:"P(X = k) = \\binom{n}{k} p^k (1-p)^{n-k}"})}),Z.jsxs("p",{className:"text-indigo-800 dark:text-indigo-200 mt-2",children:["Onde ",Z.jsx(x.InlineMath,{math:"\\binom{n}{k}"}),' é o coeficiente binomial "n escolhe k"']})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"É exata quando as condições são atendidas, mas pode ser computacionalmente intensiva para grandes n."})]});case"poisson":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Aproximação Poisson"})," é usada quando n é grande e p é pequeno, fazendo λ = n×p pequeno."]}),Z.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-teal-900 dark:text-teal-100 mb-2",children:"Fórmula:"}),Z.jsx("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded border",children:Z.jsx(x.BlockMath,{math:"P(X = k) \\approx \\frac{e^{-\\lambda} \\lambda^k}{k!}"})}),Z.jsxs("p",{className:"text-teal-800 dark:text-teal-200 mt-2",children:["Onde ",Z.jsx(x.InlineMath,{math:"\\lambda = n \\times p"})," é o parâmetro da distribuição"]})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Recomendada quando λ < 10. É útil para modelar eventos raros."})]});case"normal":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("p",{className:"theme-text-secondary",children:[Z.jsx("strong",{children:"Aproximação Normal"})," é válida quando n×p ≥ 10 e n×(1-p) ≥ 10."]}),Z.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg",children:[Z.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-2",children:"Parâmetros:"}),Z.jsxs("div",{className:"text-orange-800 dark:text-orange-200",children:[Z.jsxs("p",{children:["Média: ",Z.jsx(x.InlineMath,{math:"\\mu = n \\times p"})]}),Z.jsxs("p",{children:["Desvio padrão: ",Z.jsx(x.InlineMath,{math:"\\sigma = \\sqrt{n \\times p \\times (1-p)}"})]})]})]}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Usa correção de continuidade para melhor precisão com variáveis discretas."})]});case"history":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Z.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"📚"}),Z.jsx("h4",{className:"font-semibold theme-text",children:"História (Binomial & Aproximações)"})]}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:"1713 — Jakob Bernoulli"}),Z.jsxs("p",{className:"text-blue-600 dark:text-blue-200 text-sm",children:[Z.jsx("em",{children:"Ars Conjectandi"}),": ensaios de Bernoulli (sucesso/fracasso) e fundamentos da binomial."]})]}),Z.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-green-700 dark:text-green-300",children:"1733 — Abraham de Moivre"}),Z.jsxs("p",{className:"text-green-600 dark:text-green-200 text-sm",children:["Aproximação normal da binomial para ",Z.jsx("em",{children:"n"})," grande (moedas)."]})]}),Z.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-purple-700 dark:text-purple-300",children:"1812 — Pierre-Simon Laplace"}),Z.jsxs("p",{className:"text-purple-600 dark:text-purple-200 text-sm",children:["Generalização (qualquer ",Z.jsx("em",{children:"p"}),"), método de Laplace (CLT/De Moivre–Laplace)."]})]}),Z.jsxs("div",{className:"border-l-4 border-teal-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-teal-700 dark:text-teal-300",children:"1837 — Siméon Denis Poisson"}),Z.jsx("p",{className:"text-teal-600 dark:text-teal-200 text-sm",children:"Distribuição de Poisson como limite/aproximação da binomial (eventos raros)."})]})]}),Z.jsx("p",{className:"text-sm theme-text-secondary mt-4",children:"Controle de qualidade é uma aplicação moderna dessas ideias (binomial exata, Poisson e Normal)."})]});case"manual_calc":return Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Z.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"🧮"}),Z.jsx("h4",{className:"font-semibold theme-text",children:"Cálculo Manual Passo-a-Passo"})]}),Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[Z.jsx("h5",{className:"font-medium theme-text mb-2",children:"Exemplo: n=5, p=0.3, k=2"}),Z.jsx("p",{className:"theme-text-secondary mb-2",children:"Calcular P(X > 2) = P(X=3) + P(X=4) + P(X=5)"}),Z.jsxs("div",{className:"space-y-2 text-sm",children:[Z.jsxs("p",{children:[Z.jsx("strong",{children:"Passo 1:"})," Calcular coeficientes binomiais"]}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"C(5,3) = \\frac{5!}{3! \\times 2!} = 10"})}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"C(5,4) = \\frac{5!}{4! \\times 1!} = 5"})}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"C(5,5) = \\frac{5!}{5! \\times 0!} = 1"})}),Z.jsxs("p",{className:"mt-3",children:[Z.jsx("strong",{children:"Passo 2:"})," Calcular probabilidades"]}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"P(X=3) = 10 \\times (0.3)^3 \\times (0.7)^2 = 10 \\times 0.027 \\times 0.49 = 0.1323"})}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"P(X=4) = 5 \\times (0.3)^4 \\times (0.7)^1 = 5 \\times 0.0081 \\times 0.7 = 0.02835"})}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"P(X=5) = 1 \\times (0.3)^5 \\times (0.7)^0 = 1 \\times 0.00243 \\times 1 = 0.00243"})}),Z.jsxs("p",{className:"mt-3",children:[Z.jsx("strong",{children:"Passo 3:"})," Somar probabilidades"]}),Z.jsx("p",{children:Z.jsx(x.InlineMath,{math:"P(X>2) = 0.1323 + 0.02835 + 0.00243 = 0.16308"})})]})]}),Z.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:Z.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:[Z.jsx("strong",{children:"Dica:"})," Para valores grandes de n, o cálculo manual se torna impraticável. É aí que as aproximações Poisson e Normal se tornam essenciais!"]})})]})]});case"faq":return Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Z.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"❓"}),Z.jsx("h4",{className:"font-semibold theme-text",children:"Perguntas Frequentes"})]}),Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-blue-700 dark:text-blue-300 mb-2",children:"O que é distribuição binomial?"}),Z.jsx("p",{className:"text-blue-600 dark:text-blue-200 text-sm",children:"É um modelo probabilístico que conta o número de sucessos em n tentativas independentes, cada uma com probabilidade p de sucesso. Exemplo: número de caras em 10 lançamentos de moeda."})]}),Z.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-green-700 dark:text-green-300 mb-2",children:"Quando usar a aproximação Poisson?"}),Z.jsxs("p",{className:"text-green-600 dark:text-green-200 text-sm",children:["Quando n é grande e p é pequeno (",Z.jsx(x.InlineMath,{math:"\\lambda = n \\times p < 10"}),"). É útil para modelar eventos raros como acidentes de trânsito ou defeitos em produção."]})]}),Z.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-orange-700 dark:text-orange-300 mb-2",children:"Quando usar a aproximação Normal?"}),Z.jsxs("p",{className:"text-orange-600 dark:text-orange-200 text-sm",children:["Quando ",Z.jsx(x.InlineMath,{math:"n \\times p \\geq 10"})," e ",Z.jsx(x.InlineMath,{math:"n \\times (1-p) \\geq 10"}),". A distribuição binomial se aproxima da Normal quando o número de tentativas é grande."]})]}),Z.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-purple-700 dark:text-purple-300 mb-2",children:"O que significa P(X > k)?"}),Z.jsxs("p",{className:"text-purple-600 dark:text-purple-200 text-sm",children:["É a probabilidade de obter mais de k sucessos. Por exemplo, se k=5, calcula ",Z.jsx(x.InlineMath,{math:"P(X=6) + P(X=7) + \\ldots + P(X=n)"}),"."]})]}),Z.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-red-700 dark:text-red-300 mb-2",children:"Por que usar logaritmos nos cálculos?"}),Z.jsxs("div",{className:"text-red-600 dark:text-red-200 text-sm space-y-3",children:[Z.jsxs("p",{children:["Quando temos ",Z.jsx("strong",{children:"valores grandes de n e pequenos de p"}),", as probabilidades podem ser",Z.jsx("strong",{children:" extremamente pequenas"})," (como ",Z.jsx(x.InlineMath,{math:"10^{-100}"})," ou menores), causando",Z.jsx("strong",{children:" overflow/underflow numérico"})," nos computadores."]}),Z.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[Z.jsx("p",{className:"font-medium mb-2",children:"🔍 Cenários Problemáticos:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[Z.jsxs("li",{children:[Z.jsx("strong",{children:"Controle de qualidade:"})," n=10.000 peças, p=0.0001 (1 defeito em 10.000)"]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Eventos raros:"})," n=1.000.000 pessoas, p=0.000001 (doença rara)"]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Sistemas confiáveis:"})," n=100.000 componentes, p=0.00001 (falha)"]})]}),Z.jsxs("p",{className:"mt-2 text-xs",children:["💡 ",Z.jsx("strong",{children:"Resultado:"})," ",Z.jsx(x.InlineMath,{math:"P(X=0)"})," pode ser ",Z.jsx(x.InlineMath,{math:"\\approx 10^{-434}"})]})]}),Z.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg",children:[Z.jsx("p",{className:"font-medium mb-2",children:"🧮 Solução Logarítmica:"}),Z.jsx("p",{children:"Em vez de calcular diretamente:"}),Z.jsx("p",{className:"text-center my-2",children:Z.jsx(x.InlineMath,{math:"P = \\binom{n}{k} p^k (1-p)^{n-k}"})}),Z.jsxs("p",{children:["Usamos a propriedade: ",Z.jsx(x.InlineMath,{math:"\\log(a \\times b) = \\log a + \\log b"})]}),Z.jsx("p",{className:"text-center my-2",children:Z.jsx(x.InlineMath,{math:"\\log P = \\log\\binom{n}{k} + k\\log p + (n-k)\\log(1-p)"})}),Z.jsxs("p",{children:["Depois convertemos: ",Z.jsx(x.InlineMath,{math:"P = e^{\\log P}"})," (apenas no resultado final)"]})]}),Z.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[Z.jsx("p",{className:"font-medium mb-2",children:"✅ Vantagens:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[Z.jsxs("li",{children:[Z.jsx("strong",{children:"Estabilidade:"})," ",Z.jsx(x.InlineMath,{math:"-1000"})," é manejável, ",Z.jsx(x.InlineMath,{math:"10^{-1000}"})," não"]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Precisão:"})," Mantém dígitos significativos"]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Eficiência:"})," Multiplicações → Somas (mais rápido)"]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Robustez:"})," Funciona para qualquer n e p"]})]})]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"🎯 Na prática:"})," Essa aplicação usa essa técnica automaticamente, garantindo resultados precisos mesmo para distribuições com probabilidades microscópicas!"]})]})]}),Z.jsxs("div",{className:"border-l-4 border-teal-500 pl-4",children:[Z.jsx("h5",{className:"font-medium text-teal-700 dark:text-teal-300 mb-2",children:"Qual a diferença entre média e variância?"}),Z.jsxs("p",{className:"text-teal-600 dark:text-teal-200 text-sm",children:["Média ",Z.jsx(x.InlineMath,{math:"(\\mu) = n \\times p"})," indica o valor esperado. Variância ",Z.jsx(x.InlineMath,{math:"(\\sigma^2) = n \\times p \\times (1-p)"})," mede a dispersão. Desvio padrão ",Z.jsx(x.InlineMath,{math:"(\\sigma) = \\sqrt{\\text{variância}}"})," é mais fácil de interpretar."]})]})]})]});default:return Z.jsx("div",{children:"Conteúdo não encontrado"})}},Se=e=>{switch(e){case"n":return"Número de Tentativas (n)";case"p":return"Probabilidade de Sucesso (p)";case"k":return"Limite Superior (k)";case"binomial":return"Distribuição Binomial";case"poisson":return"Aproximação de Poisson";case"normal":return"Aproximação de Normal";case"history":return"História da Distribuição Binomial";case"manual_calc":return"Cálculo Manual Passo-a-Passo";case"faq":return"Perguntas Frequentes";default:return"Explicação"}},Ee=({isOpen:e,onClose:s,type:t})=>e&&t?Z.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4",children:Z.jsxs("div",{className:"theme-card rounded-xl theme-shadow max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[Z.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[Z.jsx("h3",{className:"text-xl font-bold theme-text",children:Se(t)}),Z.jsx("button",{onClick:s,className:"theme-text-secondary hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:Z.jsx(h,{className:"w-6 h-6"})})]}),Z.jsx("div",{className:"p-6",children:Ce(t)})]})}):null,Ie=({onGoToCalculator:e,onOpenFAQ:s})=>Z.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-fade-in-up",children:[Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-3",children:"Objetivo"}),Z.jsx("p",{className:"theme-text-secondary leading-relaxed",children:"Entender o que é o Teorema Binomial (Binômio de Newton), o que são coeficientes binomiais e como isso se conecta à distribuição binomial usada na calculadora."})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-4",children:"Vocabulário rápido (glossário)"}),Z.jsxs("div",{className:"space-y-3 text-sm lg:text-base",children:[Z.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[Z.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:"Ensaio de Bernoulli"}),Z.jsx("p",{className:"text-blue-600 dark:text-blue-200",children:"Tentativa com apenas dois resultados possíveis: sucesso ou fracasso."})]}),Z.jsxs("div",{className:"border-l-4 border-emerald-500 pl-4",children:[Z.jsx("p",{className:"font-semibold text-emerald-700 dark:text-emerald-300",children:"p"}),Z.jsxs("p",{className:"text-emerald-600 dark:text-emerald-200",children:["Probabilidade de sucesso; lembrando que ",Z.jsx(x.InlineMath,{math:"q = 1 - p"}),"."]})]}),Z.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[Z.jsxs("p",{className:"font-semibold text-purple-700 dark:text-purple-300",children:["Coeficiente binomial ",Z.jsx(x.InlineMath,{math:"C(n,k)"})]}),Z.jsxs("p",{className:"text-purple-600 dark:text-purple-200",children:["Número de maneiras de escolher ",Z.jsx(x.InlineMath,{math:"k"})," sucessos em ",Z.jsx(x.InlineMath,{math:"n"})," tentativas independentes: ",Z.jsx(x.InlineMath,{math:"C(n,k) = \\frac{n!}{k!\\,(n-k)!}"}),"."]})]}),Z.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[Z.jsx("p",{className:"font-semibold text-orange-700 dark:text-orange-300",children:"Distribuição Binomial"}),Z.jsxs("p",{className:"text-orange-600 dark:text-orange-200",children:["Probabilidade de obter ",Z.jsx(x.InlineMath,{math:"k"})," sucessos: ",Z.jsx(x.InlineMath,{math:"P(X = k) = C(n,k) p^k q^{n-k}"}),"."]})]}),Z.jsxs("div",{className:"border-l-4 border-rose-500 pl-4",children:[Z.jsx("p",{className:"font-semibold text-rose-700 dark:text-rose-300",children:"Binômio de Newton"}),Z.jsxs("p",{className:"text-rose-600 dark:text-rose-200",children:["Expansão de ",Z.jsx(x.InlineMath,{math:"(a+b)^n"})," usando os mesmos coeficientes ",Z.jsx(x.InlineMath,{math:"C(n,i)"}),"."]})]})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 space-y-4",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text",children:"Do Binômio de Newton à distribuição binomial"}),Z.jsxs("ol",{className:"list-decimal list-inside space-y-3 theme-text-secondary",children:[Z.jsxs("li",{children:["Comece com a expansão ",Z.jsx(x.InlineMath,{math:"(a + b)^n = \\sum_{k=0}^{n} \\binom{n}{k} a^{n-k} b^k"}),", como vista na Aula 7. Esse formato evidencia o coeficiente ",Z.jsx(x.InlineMath,{math:"\\binom{n}{k}"}),"."]}),Z.jsxs("li",{children:["Para ensaios de Bernoulli, substituímos ",Z.jsx(x.InlineMath,{math:"a = p"})," (sucesso) e ",Z.jsx(x.InlineMath,{math:"b = q = 1 - p"})," (fracasso). Usando ",Z.jsx(x.InlineMath,{math:"p + q = 1"}),", obtemos a identidade ",Z.jsx(x.BlockMath,{math:"1 = (p + q)^n = \\sum_{k=0}^{n} \\binom{n}{k} p^{k} q^{n-k}"}),"."]}),Z.jsxs("li",{children:["Cada termo da soma corresponde a “",Z.jsx(x.InlineMath,{math:"k"})," sucessos e ",Z.jsx(x.InlineMath,{math:"n-k"})," fracassos”:",Z.jsx(x.InlineMath,{math:"\\binom{n}{k}"})," formas de escolher as posições de sucesso, ",Z.jsx(x.InlineMath,{math:"p^{k}"})," pela chance de cada sucesso e ",Z.jsx(x.InlineMath,{math:"q^{n-k}"})," para os fracassos restantes. Assim chegamos à probabilidade de exatamente ",Z.jsx(x.InlineMath,{math:"k"})," sucessos:",Z.jsx(x.BlockMath,{math:"P(X = k) = \\binom{n}{k} p^{k} q^{n-k}"}),"."]})]}),Z.jsxs("p",{className:"theme-text-secondary leading-relaxed",children:["Na aplicação, os controles ",Z.jsx("strong",{children:"n"}),", ",Z.jsx("strong",{children:"p"})," e ",Z.jsx("strong",{children:"k"})," alimentam diretamente essa expressão; para probabilidades como ",Z.jsx(x.InlineMath,{math:"P(X > k)"}),", a calculadora soma os termos de ",Z.jsx(x.InlineMath,{math:"k+1"})," até ",Z.jsx(x.InlineMath,{math:"n"}),"."]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 space-y-3",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text",children:"Onde cada fórmula aparece na interface"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 theme-text-secondary",children:[Z.jsxs("li",{children:[Z.jsx("strong",{children:"Explainer"}),": revisita o Binômio de Newton termo a termo para reforçar a origem de ",Z.jsx(x.InlineMath,{math:"\\binom{n}{k}"}),"."]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Resultados exatos"}),": aplicam ",Z.jsx(x.InlineMath,{math:"P(X = k) = \\binom{n}{k} p^{k} q^{n-k}"})," e derivam ",Z.jsx(x.InlineMath,{math:"P(X > k)"})," via somatórios."]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Aproximação Poisson"}),": usa ",Z.jsx(x.InlineMath,{math:"P(X = k) \\approx e^{-\\lambda} \\lambda^k / k!"})," quando ",Z.jsx(x.InlineMath,{math:"\\lambda = n p"})," indica evento raro."]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Aproximação Normal"}),": traça a curva com ",Z.jsx(x.InlineMath,{math:"\\mu = n p"})," e ",Z.jsx(x.InlineMath,{math:"\\sigma = \\sqrt{n p (1-p)}"}),", aplicando correção de continuidade como nos slides."]})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-4",children:"Exemplo guiado (curto)"}),Z.jsx("p",{className:"theme-text-secondary mb-4",children:"Use o preset “peças defeituosas” (n=100, p=0.02, k=5)."}),Z.jsxs("ol",{className:"list-decimal list-inside space-y-3 theme-text-secondary",children:[Z.jsxs("li",{children:["Defina ",Z.jsx(x.InlineMath,{math:"n = 100"}),", ",Z.jsx(x.InlineMath,{math:"p = 0.02"}),", ",Z.jsx(x.InlineMath,{math:"q = 0.98"})," e ",Z.jsx(x.InlineMath,{math:"k = 5"}),"."]}),Z.jsxs("li",{children:["Reconheça que ",Z.jsx(x.InlineMath,{math:"P(X > k) = 1 - \\sum_{i=0}^{k} C(n,i)\\,p^i q^{n-i}"}),"; para o preset, isso vira ",Z.jsx(x.InlineMath,{math:"1 - \\sum_{i=0}^{5} C(100,i)\\,(0.02)^i (0.98)^{100-i}"}),"."]}),Z.jsx("li",{children:"A calculadora soma esses termos automaticamente, exibe o resultado exato e compara com Poisson e Normal, mostrando quando cada aproximação é recomendada."})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-3",children:"Quando usar aproximações (spoiler do que vem)"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 theme-text-secondary",children:[Z.jsxs("li",{children:[Z.jsx("strong",{children:"Poisson"}),": n grande, p pequeno e ",Z.jsx(x.InlineMath,{math:"\\lambda = n p"})," tipicamente < 10."]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"Normal"}),": ",Z.jsx(x.InlineMath,{math:"n p \\geq 10"})," e ",Z.jsx(x.InlineMath,{math:"n (1-p) \\geq 10"}),", usando correção de continuidade."]})]}),Z.jsx("p",{className:"text-sm theme-text-tertiary mt-2",children:"As abas de resultados já indicam visualmente quando cada aproximação é “recomendada”."})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-3",children:"Erros comuns"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 theme-text-secondary",children:[Z.jsxs("li",{children:["Confundir ",Z.jsx(x.InlineMath,{math:"C(n,k)"})," com ",Z.jsx(x.InlineMath,{math:"n^k"}),"."]}),Z.jsxs("li",{children:["Esquecer que ",Z.jsx(x.InlineMath,{math:"q = 1 - p"}),"."]}),Z.jsxs("li",{children:["Aplicar Normal quando ",Z.jsx(x.InlineMath,{math:"n p"})," ou ",Z.jsx(x.InlineMath,{math:"n(1-p)"})," é pequeno."]}),Z.jsxs("li",{children:["Interpretar ",Z.jsx(x.InlineMath,{math:"P(X > k)"})," como ",Z.jsx(x.InlineMath,{math:"P(X \\geq k)"})," – atenção ao símbolo “>”."]})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-3",children:"Exercícios relâmpago (teste na calculadora)"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 theme-text-secondary",children:[Z.jsxs("li",{children:["n=20, p=0.3 — calcule ",Z.jsx(x.InlineMath,{math:"P(X > 8)"}),"."]}),Z.jsxs("li",{children:["n=1000, p=0.001 — por que Poisson é adequada? (Resposta: ",Z.jsx(x.InlineMath,{math:"\\lambda = 1"}),")."]}),Z.jsxs("li",{children:["n=50, p=0.85 — por que Normal é válida? (",Z.jsx(x.InlineMath,{math:"n p = 42"})," e ",Z.jsx(x.InlineMath,{math:"n(1-p) = 7.5"})," → borderline, use com cautela)."]})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 space-y-3",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text",children:"Histórico super curto"}),Z.jsxs("div",{className:"space-y-3 text-sm lg:text-base",children:[Z.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:"1713 — Bernoulli"}),Z.jsx("p",{className:"text-blue-600 dark:text-blue-200",children:"Ensaios de Bernoulli e a ideia de sucessos/fracassos."})]}),Z.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-green-700 dark:text-green-300",children:"1733 — De Moivre"}),Z.jsx("p",{className:"text-green-600 dark:text-green-200",children:"Aproximação normal para grandes n."})]}),Z.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-purple-700 dark:text-purple-300",children:"1812 — Laplace"}),Z.jsx("p",{className:"text-purple-600 dark:text-purple-200",children:"Refinou a aproximação e generalizou o uso."})]}),Z.jsxs("div",{className:"border-l-4 border-teal-500 pl-4",children:[Z.jsx("p",{className:"font-medium text-teal-700 dark:text-teal-300",children:"1837 — Poisson"}),Z.jsx("p",{className:"text-teal-600 dark:text-teal-200",children:"Introduziu a distribuição de Poisson para eventos raros."})]})]}),Z.jsx("p",{className:"text-sm theme-text-tertiary",children:"Aplicações modernas incluem controle de qualidade, justamente os cenários dos presets."})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-3",children:"Notação usada na aplicação"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 theme-text-secondary",children:[Z.jsxs("li",{children:[Z.jsx(x.InlineMath,{math:"C(n,k)"})," e ",Z.jsx(x.InlineMath,{math:"\\binom{n}{k}"})," aparecem como sinônimos no texto."]}),Z.jsxs("li",{children:[Z.jsx(x.InlineMath,{math:"X \\sim \\text{Bin}(n,p)"})," descreve a variável aleatória modelada."]}),Z.jsxs("li",{children:["Média ",Z.jsx(x.InlineMath,{math:"\\mu = n p"})," e desvio padrão ",Z.jsx(x.InlineMath,{math:"\\sigma = \\sqrt{n p (1-p)}"})," — iguais aos valores mostrados na aba de resultados."]})]})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 space-y-3",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text",children:"Referência aos slides"}),Z.jsxs("div",{className:"border-l-4 border-primary-500 pl-4",children:[Z.jsx("p",{className:"font-medium theme-text",children:"Aula 7 – slide “Binômio de Newton”."}),Z.jsxs("p",{className:"text-sm theme-text-secondary",children:["A mesma expansão ",Z.jsx(x.InlineMath,{math:"(a+b)^n = \\sum_{i=0}^{n} \\binom{n}{i} a^{n-i} b^i"})," que aparece lá foi usada acima para derivar ",Z.jsx(x.InlineMath,{math:"P(X = k) = \\binom{n}{k} p^{k} q^{n-k}"}),"."]})]}),Z.jsx("p",{className:"theme-text-secondary text-sm",children:"Consulte esse slide caso queira rever a dedução visual passo a passo; o restante da aba mostra como cada etapa foi traduzida para a nossa interface."})]}),Z.jsxs("section",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8",children:[Z.jsx("h3",{className:"text-lg lg:text-xl font-semibold theme-text mb-4",children:"Pronto para continuar?"}),Z.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[Z.jsx("button",{onClick:e,className:"w-full sm:w-auto px-5 py-3 rounded-xl bg-secondary-600 hover:bg-secondary-700 text-white font-semibold transition-all duration-200 hover-lift",children:"Ir para a Calculadora"}),Z.jsx("button",{onClick:s,className:"w-full sm:w-auto px-5 py-3 rounded-xl bg-neutral-200 hover:bg-neutral-300 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold transition-all duration-200 hover-lift",children:"Ler Perguntas Frequentes"})]})]})]}),Ae=e.createContext(void 0),_e=({children:s})=>{const[t,a]=e.useState(()=>localStorage.getItem("binomial-theme")||"light");e.useEffect(()=>{const e=document.documentElement;"dark"===t?e.classList.add("dark"):e.classList.remove("dark"),localStorage.setItem("binomial-theme",t)},[t]);return Z.jsx(Ae.Provider,{value:{theme:t,toggleTheme:()=>{a(e=>"light"===e?"dark":"light")}},children:s})},qe=()=>{const{theme:s,toggleTheme:t}=(()=>{const s=e.useContext(Ae);if(void 0===s)throw new Error("useTheme must be used within a ThemeProvider");return s})();return Z.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Z.jsx("span",{className:"text-sm font-medium theme-text-secondary select-none",children:"Tema"}),Z.jsxs("button",{onClick:t,className:`\n          relative inline-flex items-center justify-center\n          w-20 h-10 rounded-full transition-all duration-300 ease-in-out\n          focus:outline-none focus:ring-4 focus:ring-offset-2 \n          hover:scale-105 hover:shadow-lg group\n          ${"dark"===s?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:ring-purple-400/50":"bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 focus:ring-orange-400/50"}\n          shadow-lg\n        `,title:"Alternar para modo "+("light"===s?"escuro":"claro"),children:[Z.jsx("div",{className:`\n            absolute w-8 h-8 bg-white rounded-full shadow-lg\n            transform transition-all duration-300 ease-in-out\n            flex items-center justify-center\n            group-hover:shadow-xl border-2\n            ${"dark"===s?"translate-x-5 border-purple-200":"-translate-x-5 border-orange-200"}\n          `,children:"light"===s?Z.jsx(u,{className:"w-5 h-5 text-orange-500 drop-shadow-sm"}):Z.jsx(p,{className:"w-5 h-5 text-indigo-600 drop-shadow-sm"})}),Z.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[Z.jsx(u,{className:"w-4 h-4 transition-opacity duration-300 "+("light"===s?"text-white opacity-100":"text-yellow-300 opacity-40")}),Z.jsx(p,{className:"w-4 h-4 transition-opacity duration-300 "+("dark"===s?"text-white opacity-100":"text-indigo-300 opacity-40")})]})]}),Z.jsx("span",{className:"text-xs theme-text-secondary select-none capitalize",children:"light"===s?"Claro":"Escuro"})]})},De=({onNavigate:s,currentSection:t="intro"})=>{const[l,n]=e.useState(!1),o=[{id:"intro",label:"Introdução",icon:f,description:"Resumo teórico antes de calcular"},{id:"calculator",label:"Calculadora",icon:i,description:"Controles e parâmetros"},{id:"charts",label:"Gráficos",icon:c,description:"Visualizações interativas"},{id:"explanation",label:"Explicação",icon:j,description:"Conceitos e fórmulas"},{id:"help",label:"Ajuda",icon:r,description:"Tutorial e FAQ"},{id:"settings",label:"Configurações",icon:a,description:"Tema e preferências"}];return Z.jsxs(Z.Fragment,{children:[Z.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 w-12 h-12 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm border border-slate-200 dark:border-slate-700 rounded-2xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 hover-lift","aria-label":"Abrir menu de navegação",children:Z.jsx(g,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),l&&Z.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:()=>n(!1)}),Z.jsxs("div",{className:"lg:hidden fixed top-0 left-0 z-50 w-80 h-full bg-white dark:bg-slate-900 shadow-2xl transform transition-transform duration-300 ease-in-out "+(l?"translate-x-0":"-translate-x-full"),children:[Z.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-lg font-bold theme-text",children:"Navegação"}),Z.jsx("p",{className:"text-sm theme-text-secondary",children:"Acesse rapidamente qualquer seção"})]}),Z.jsx("button",{onClick:()=>n(!1),className:"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors","aria-label":"Fechar menu",children:Z.jsx(h,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})]}),Z.jsx("nav",{className:"p-6 space-y-2",children:o.map(e=>{const a=e.icon,r=t===e.id;return Z.jsxs("button",{onClick:()=>{return t=e.id,s(t),void n(!1);var t},className:"w-full flex items-center gap-4 p-4 rounded-2xl transition-all duration-200 text-left group "+(r?"bg-primary-500 text-white shadow-lg":"bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 theme-text"),children:[Z.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r?"bg-white/20":"bg-slate-200 dark:bg-slate-700 group-hover:bg-slate-300 dark:group-hover:bg-slate-600"} transition-colors`,children:Z.jsx(a,{className:"w-6 h-6 "+(r?"text-white":"text-slate-600 dark:text-slate-300")})}),Z.jsxs("div",{className:"flex-1 min-w-0",children:[Z.jsx("div",{className:"font-semibold "+(r?"text-white":"theme-text"),children:e.label}),Z.jsx("div",{className:"text-sm "+(r?"text-white/80":"theme-text-secondary"),children:e.description})]}),Z.jsx(b,{className:"w-5 h-5 transition-transform group-hover:translate-x-1 "+(r?"text-white/60":"text-slate-400")})]},e.id)})}),Z.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-slate-200 dark:border-slate-700",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"text-xs theme-text-secondary mb-2",children:"Calculadora de Probabilidade Binomial"}),Z.jsx("div",{className:"text-xs theme-text-tertiary",children:"Versão otimizada para mobile"})]})})]})]})};var Oe=Object.defineProperty,Te=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,Le=(e,s,t)=>s in e?Oe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Re=(e,s)=>{for(var t in s||(s={}))ze.call(s,t)&&Le(e,t,s[t]);if($e)for(var t of $e(s))Fe.call(s,t)&&Le(e,t,s[t]);return e},Be=(e,s)=>Te(e,Ue(s)),Xe=(e,s,t)=>new Promise((a,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},l=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});const Ve="binomial_analytics_v2",Ge=120;const He=new class{constructor(){this.events=[],this.isEnabled=!0,this.subscribers=new Set,this.saveTimeout=null,this.handleSessionEnd=()=>{const e=Date.now()-this.sessionStart;this.recordSessionDuration(e),this.track("session_end",{duration:e,timestamp:Date.now()}),this.flushSave()},this.sessionId=this.generateSessionId(),this.userMetrics=this.initializeUserMetrics(),this.gamificationMetrics=this.initializeGamificationMetrics(),this.performanceMetrics=this.initializePerformanceMetrics(),this.errorMetrics=this.initializeErrorMetrics(),this.sessionStart=Date.now(),this.loadStoredMetrics(),this.startSessionTracking(),this.initializePerformanceMonitoring()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).slice(2,11)}`}initializeUserMetrics(){return{totalCalculations:0,favoriteParameters:{n:[],p:[],k:[],frequency:{}},mostUsedPresets:{},sessionDuration:0,lastVisit:Date.now(),deviceInfo:{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language},sessionCount:0,achievementsUnlocked:0,levelUps:0,challengesCompleted:0,dailySessions:{},recentSessions:[],calculationHistory:[],calculationStreak:{current:0,longest:0}}}initializePerformanceMetrics(){return{calculationTime:[],renderTime:[],memoryUsage:[],bundleSize:0,loadTime:performance.now()}}initializeGamificationMetrics(){return{totals:{achievements:0,levelUps:0,challenges:0,pointsAwarded:0},recentEvents:[]}}initializeErrorMetrics(){return{total:0,byContext:{},recent:[]}}migrateSnapshot(e){var s,t,a,r,i,l,n,o,c,d,m,x,h,u;const p={version:2,user:Be(Re(Re({},this.initializeUserMetrics()),e.user),{favoriteParameters:{n:null!=(t=null==(s=e.user.favoriteParameters)?void 0:s.n)?t:[],p:null!=(r=null==(a=e.user.favoriteParameters)?void 0:a.p)?r:[],k:null!=(l=null==(i=e.user.favoriteParameters)?void 0:i.k)?l:[],frequency:null!=(o=null==(n=e.user.favoriteParameters)?void 0:n.frequency)?o:this.buildFrequencyMapFromArrays(e.user.favoriteParameters)},mostUsedPresets:this.buildPresetUsageMap(e.user.mostUsedPresets),dailySessions:null!=(c=e.user.dailySessions)?c:{},recentSessions:null!=(d=e.user.recentSessions)?d:[],calculationHistory:null!=(m=e.user.calculationHistory)?m:[],calculationStreak:null!=(x=e.user.calculationStreak)?x:{current:0,longest:0},lastCalculationAt:e.user.lastCalculationAt}),gamification:null!=(h=e.gamification)?h:this.initializeGamificationMetrics(),errors:null!=(u=e.errors)?u:this.initializeErrorMetrics()};this.userMetrics=p.user,this.gamificationMetrics=p.gamification,this.errorMetrics=p.errors,this.saveMetrics()}buildFrequencyMapFromArrays(e){var s,t,a;if(!(null==e?void 0:e.n)||!(null==e?void 0:e.p)||!(null==e?void 0:e.k))return{};const r={},i=null!=(s=e.n)?s:[],l=null!=(t=e.p)?t:[],n=null!=(a=e.k)?a:[],o=Math.min(i.length,l.length,n.length);for(let c=0;c<o;c+=1){const e=Number(i[c]),s=Number(l[c]),t=Number(n[c]),a=`${e}:${s}:${t}`;r[a]=r[a]?Be(Re({},r[a]),{count:r[a].count+1}):{n:e,p:s,k:t,count:1}}return r}buildPresetUsageMap(e){return e?Array.isArray(e)?e.reduce((e,s)=>{var t;return e[s]=(null!=(t=e[s])?t:0)+1,e},{}):Re({},e):{}}pushWithLimit(e,s,t){e.push(s),e.length>t&&e.splice(0,e.length-t)}notifySubscribers(e){this.subscribers.forEach(s=>{try{s(e)}catch(t){}})}scheduleSave(){this.saveTimeout&&window.clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(()=>{this.saveTimeout=null,this.saveMetrics()},2e3)}flushSave(){this.saveTimeout&&(window.clearTimeout(this.saveTimeout),this.saveTimeout=null),this.saveMetrics()}updateCalculationStreak(e){const s=new Date(e).toISOString().split("T")[0],t=this.userMetrics.calculationStreak;if(!t.lastActiveDay)return t.current=1,t.longest=Math.max(t.longest,t.current),void(t.lastActiveDay=s);if(t.lastActiveDay===s)return;const a=new Date(t.lastActiveDay),r=new Date(s);1===Math.round((r.getTime()-a.getTime())/864e5)?t.current+=1:t.current=1,t.lastActiveDay=s,t.longest=Math.max(t.longest,t.current)}loadStoredMetrics(){var e,s,t,a,r,i,l,n,o,c,d,m,x,h,u,p,g,b,f,j,v,y,N,k,w,P,M,C,S,E,I,A,_,q;try{const D=null!=(e=localStorage.getItem(Ve))?e:localStorage.getItem("binomial_analytics");if(!D)return;const O=JSON.parse(D);if("version"in O){const e=O;if(2!==e.version)return void this.migrateSnapshot(e);this.userMetrics=Be(Re(Re({},this.userMetrics),e.user),{favoriteParameters:{n:null!=(t=null==(s=e.user.favoriteParameters)?void 0:s.n)?t:this.userMetrics.favoriteParameters.n,p:null!=(r=null==(a=e.user.favoriteParameters)?void 0:a.p)?r:this.userMetrics.favoriteParameters.p,k:null!=(l=null==(i=e.user.favoriteParameters)?void 0:i.k)?l:this.userMetrics.favoriteParameters.k,frequency:null!=(c=null!=(o=null==(n=e.user.favoriteParameters)?void 0:n.frequency)?o:this.buildFrequencyMapFromArrays(e.user.favoriteParameters))?c:this.userMetrics.favoriteParameters.frequency},mostUsedPresets:this.buildPresetUsageMap(e.user.mostUsedPresets),dailySessions:null!=(d=e.user.dailySessions)?d:this.userMetrics.dailySessions,recentSessions:null!=(m=e.user.recentSessions)?m:this.userMetrics.recentSessions,calculationHistory:null!=(x=e.user.calculationHistory)?x:this.userMetrics.calculationHistory,calculationStreak:null!=(u=null!=(h=e.user.calculationStreak)?h:this.userMetrics.calculationStreak)?u:{current:0,longest:0},lastCalculationAt:null!=(p=e.user.lastCalculationAt)?p:this.userMetrics.lastCalculationAt}),this.gamificationMetrics=Be(Re(Re({},this.gamificationMetrics),e.gamification),{recentEvents:null!=(b=null==(g=e.gamification)?void 0:g.recentEvents)?b:this.gamificationMetrics.recentEvents}),this.errorMetrics=Be(Re(Re({},this.errorMetrics),e.errors),{byContext:null!=(j=null==(f=e.errors)?void 0:f.byContext)?j:this.errorMetrics.byContext,recent:null!=(y=null==(v=e.errors)?void 0:v.recent)?y:this.errorMetrics.recent})}else{const e=O;this.userMetrics=Be(Re(Re({},this.userMetrics),e),{favoriteParameters:{n:null!=(k=null==(N=e.favoriteParameters)?void 0:N.n)?k:this.userMetrics.favoriteParameters.n,p:null!=(P=null==(w=e.favoriteParameters)?void 0:w.p)?P:this.userMetrics.favoriteParameters.p,k:null!=(C=null==(M=e.favoriteParameters)?void 0:M.k)?C:this.userMetrics.favoriteParameters.k,frequency:null!=(S=this.buildFrequencyMapFromArrays(e.favoriteParameters))?S:{}},mostUsedPresets:this.buildPresetUsageMap(e.mostUsedPresets),dailySessions:null!=(E=e.dailySessions)?E:this.userMetrics.dailySessions,recentSessions:null!=(I=e.recentSessions)?I:this.userMetrics.recentSessions,calculationHistory:null!=(A=e.calculationHistory)?A:this.userMetrics.calculationHistory,calculationStreak:null!=(_=e.calculationStreak)?_:this.userMetrics.calculationStreak,lastCalculationAt:null!=(q=e.lastCalculationAt)?q:this.userMetrics.lastCalculationAt}),this.saveMetrics()}}catch(D){}}saveMetrics(){try{const e={version:2,user:this.userMetrics,gamification:this.gamificationMetrics,errors:this.errorMetrics};localStorage.setItem(Ve,JSON.stringify(e)),localStorage.removeItem("binomial_analytics")}catch(e){}}startSessionTracking(){this.sessionStart=Date.now(),this.userMetrics.lastVisit=this.sessionStart,this.userMetrics.sessionCount+=1,this.incrementDailySessions(this.sessionStart),this.scheduleSave(),this.track("session_start",{sessionId:this.sessionId,timestamp:this.sessionStart}),document.addEventListener("visibilitychange",()=>{document.hidden?this.track("page_hidden",{timestamp:Date.now()}):this.track("page_visible",{timestamp:Date.now()})}),window.addEventListener("beforeunload",this.handleSessionEnd)}recordSessionDuration(e){this.userMetrics.sessionDuration=e,this.userMetrics.recentSessions=[...this.userMetrics.recentSessions,{start:this.sessionStart,duration:e}].slice(-25)}incrementDailySessions(e){var s;const t=new Date(e).toISOString().split("T")[0];this.userMetrics.dailySessions[t]=(null!=(s=this.userMetrics.dailySessions[t])?s:0)+1}initializePerformanceMonitoring(){"memory"in performance&&setInterval(()=>{const e=performance.memory;void 0!==(null==e?void 0:e.usedJSHeapSize)&&(this.performanceMetrics.memoryUsage.push(e.usedJSHeapSize),this.performanceMetrics.memoryUsage.length>100&&this.performanceMetrics.memoryUsage.shift())},5e3),this.performanceMetrics.bundleSize=this.getBundleSize()}getBundleSize(){const e=document.querySelectorAll("script[src]");let s=0;return e.forEach(e=>{const t=e.src;t.includes("assets")&&t.includes(".js")&&(s+=1e5)}),s}track(e,s){if(!this.isEnabled)return;const t={event:e,properties:Be(Re({},null!=s?s:{}),{sessionId:this.sessionId}),timestamp:Date.now(),sessionId:this.sessionId};this.events.push(t),this.events.length>1e3&&this.events.shift(),this.notifySubscribers(t),this.handleSpecialEvents(e,s),this.sendToAnalytics(t)}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}handleSpecialEvents(e,s){var t,a,r,i,l,n;switch(e){case"calculation_performed":if(this.userMetrics.totalCalculations+=1,s&&"parameters"in s){const e=s.parameters,r=null!=(t=s.method)?t:"unknown",i=Number(null!=(a=s.duration)?a:0),l="accuracy"in s?Number(s.accuracy):void 0;if(e){const{n:s,p:t,k:a}=e;this.pushWithLimit(this.userMetrics.favoriteParameters.n,s,Ge),this.pushWithLimit(this.userMetrics.favoriteParameters.p,t,Ge),this.pushWithLimit(this.userMetrics.favoriteParameters.k,a,Ge);const r=`${s}:${t}:${a}`,i=this.userMetrics.favoriteParameters.frequency[r];this.userMetrics.favoriteParameters.frequency[r]=i?Be(Re({},i),{count:i.count+1}):{n:s,p:t,k:a,count:1}}const n={timestamp:Date.now(),method:r,duration:i,accuracy:Number.isFinite(l)?l:void 0};this.userMetrics.calculationHistory=[...this.userMetrics.calculationHistory,n].slice(-120),this.userMetrics.lastCalculationAt=n.timestamp,this.updateCalculationStreak(n.timestamp)}this.scheduleSave();break;case"preset_used":if(s&&"presetName"in s){const e=s.presetName;e&&(this.userMetrics.mostUsedPresets[e]=(null!=(r=this.userMetrics.mostUsedPresets[e])?r:0)+1)}this.scheduleSave();break;case"calculation_time":if(s&&"duration"in s){const e=Number(s.duration);Number.isNaN(e)||(this.performanceMetrics.calculationTime.push(e),this.performanceMetrics.calculationTime.length>100&&this.performanceMetrics.calculationTime.shift())}break;case"gamification_event":this.scheduleSave();break;case"error_occurred":if(s&&"object"==typeof s&&"error"in s){const e=s.error,t="context"in s?s.context:void 0;this.errorMetrics.total+=1,t&&(this.errorMetrics.byContext[t]=(null!=(i=this.errorMetrics.byContext[t])?i:0)+1),this.errorMetrics.recent=[...this.errorMetrics.recent,{message:null!=(l=null==e?void 0:e.message)?l:"Erro desconhecido",name:null!=(n=null==e?void 0:e.name)?n:"Error",context:t,timestamp:Date.now()}].slice(-25),this.scheduleSave()}}}sendToAnalytics(e){return Xe(this,null,function*(){})}trackCalculation(e,s,t,a,r){this.track("calculation_performed",{parameters:{n:e,p:s,k:t},duration:a,method:r,result:{n:e,p:s,k:t,duration:a,method:r}})}trackPresetUse(e,s,t,a){this.track("preset_used",{presetName:e,parameters:{n:s,p:t,k:a}})}trackUIInteraction(e,s,t){this.track("ui_interaction",{component:e,action:s,details:t})}trackError(e,s){this.track("error_occurred",{error:{message:e.message,stack:e.stack,name:e.name},context:s})}trackPerformance(e,s){this.track("performance_metric",{metric:e,value:s,timestamp:Date.now()})}getMetrics(){const e=Date.now()-this.sessionStart;return{user:Be(Re({},this.userMetrics),{sessionDuration:e}),performance:Be(Re({},this.performanceMetrics),{calculationTime:[...this.performanceMetrics.calculationTime],renderTime:[...this.performanceMetrics.renderTime],memoryUsage:[...this.performanceMetrics.memoryUsage]}),gamification:{totals:Re({},this.gamificationMetrics.totals),recentEvents:[...this.gamificationMetrics.recentEvents],lastEventAt:this.gamificationMetrics.lastEventAt},errors:{total:this.errorMetrics.total,byContext:Re({},this.errorMetrics.byContext),recent:[...this.errorMetrics.recent]},session:{id:this.sessionId,start:this.sessionStart,duration:e}}}getTopParameters(e=10){const s=this.userMetrics.favoriteParameters.frequency,t=Object.values(s);return 0===t.length?[]:t.sort((e,s)=>s.count-e.count).slice(0,e)}getTopPresets(e=6){const s=Object.entries(this.userMetrics.mostUsedPresets);return 0===s.length?[]:s.map(([e,s])=>({name:e,count:s})).sort((e,s)=>s.count-e.count).slice(0,e)}getAverageCalculationTime(){if(0===this.performanceMetrics.calculationTime.length)return 0;return this.performanceMetrics.calculationTime.reduce((e,s)=>e+s,0)/this.performanceMetrics.calculationTime.length}getMemoryUsageStats(){var e;const s=this.performanceMetrics.memoryUsage;return{current:null!=(e=s[s.length-1])?e:0,average:s.length>0?s.reduce((e,s)=>e+s,0)/s.length:0,max:s.length>0?Math.max(...s):0}}getDailySessions(e=7){return Object.entries(this.userMetrics.dailySessions).sort(([e],[s])=>e>s?1:-1).slice(-e).map(([e,s])=>({day:e,count:s}))}getRecentSessions(e=10){return this.userMetrics.recentSessions.slice(-e)}getEngagementScore(){const{sessionCount:e,totalCalculations:s,achievementsUnlocked:t,levelUps:a}=this.userMetrics;if(0===e)return 0;const r=s/e,i=(t+a)/Math.max(e,1);return Math.min(100,Math.round(2*r+8*i))}trackGamificationEvent(e,s={}){var t,a;switch(e){case"achievement":this.userMetrics.achievementsUnlocked+=Number(null!=(t=s.count)?t:1),this.gamificationMetrics.totals.achievements+=Number(null!=(a=s.count)?a:1);break;case"level_up":this.userMetrics.levelUps+=1,this.gamificationMetrics.totals.levelUps+=1;break;case"challenge":this.userMetrics.challengesCompleted+=1,this.gamificationMetrics.totals.challenges+=1}"points"in s&&"number"==typeof s.points&&(this.gamificationMetrics.totals.pointsAwarded+=s.points);const r=`${e}_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;this.gamificationMetrics.recentEvents=[...this.gamificationMetrics.recentEvents,{id:r,type:e,title:"string"==typeof s.title?s.title:void 0,description:"string"==typeof s.description?s.description:void 0,points:"number"==typeof s.points?s.points:"number"==typeof s.rewardPoints?s.rewardPoints:void 0,level:"level_up"===e&&"number"==typeof s.level?s.level:void 0,timestamp:Date.now()}].slice(-50),this.gamificationMetrics.lastEventAt=Date.now(),this.track("gamification_event",Re({type:e},s)),this.scheduleSave()}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}clearData(){this.events=[],this.userMetrics=this.initializeUserMetrics(),this.performanceMetrics=this.initializePerformanceMetrics(),this.gamificationMetrics=this.initializeGamificationMetrics(),this.errorMetrics=this.initializeErrorMetrics(),localStorage.removeItem("binomial_analytics"),localStorage.removeItem(Ve),this.flushSave(),this.track("storage_cleared")}exportData(){return JSON.stringify({events:this.events,userMetrics:this.userMetrics,performanceMetrics:this.performanceMetrics,exportedAt:(new Date).toISOString()},null,2)}};var Qe=Math.pow;const We=({icon:e,label:s,value:t,accentClass:a,children:r})=>Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[Z.jsx(e,{className:`h-5 w-5 ${a}`}),Z.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s})]}),Z.jsx("div",{className:`text-3xl font-bold ${a}`,children:t}),r&&Z.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r})]}),Ke={achievement:{label:"Conquista",badgeClass:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300"},level_up:{label:"Level Up",badgeClass:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"},challenge:{label:"Desafio",badgeClass:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300"}},Je=({isOpen:s,onClose:t})=>{var a,r;const[i,l]=e.useState(He.getMetrics()),[n,o]=e.useState(He.getTopParameters()),[m,x]=e.useState(He.getTopPresets()),[h,u]=e.useState(He.getMemoryUsageStats()),[p,g]=e.useState(He.getAverageCalculationTime()),[b,f]=e.useState(He.getEngagementScore()),j=e.useCallback(()=>{l(He.getMetrics()),o(He.getTopParameters()),x(He.getTopPresets()),u(He.getMemoryUsageStats()),g(He.getAverageCalculationTime()),f(He.getEngagementScore())},[]);e.useEffect(()=>{if(!s)return;j();const e=window.setInterval(j,5e3),t=He.subscribe(j);return()=>{window.clearInterval(e),t()}},[s,j]);const S=e.useCallback(e=>{if(e<=0)return"0 B";const s=["B","KB","MB","GB"],t=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1),a=e/Qe(1024,t);return`${a.toFixed(a>=10||0===t?0:2)} ${s[t]}`},[]),E=e.useCallback(e=>`${e.toFixed(2)} ms`,[]),I=e.useCallback(e=>{if(e<1e3)return`${e.toFixed(0)} ms`;const s=Math.floor(e/1e3),t=s%60,a=Math.floor(s/60)%60,r=Math.floor(s/3600);return r>0?`${r}h ${a}m ${t}s`:a>0?`${a}m ${t}s`:`${t}s`},[]),A=e.useCallback(e=>e.toLocaleString(),[]),_=e.useCallback(e=>e?new Date(e).toLocaleString():"-",[]),q=e.useMemo(()=>{var e;const s=Object.entries(null!=(e=i.errors.byContext)?e:{});return 0===s.length?"Sem registros":s.sort((e,s)=>s[1]-e[1])[0][0]},[i.errors.byContext]),D=e.useMemo(()=>i.gamification.recentEvents.slice(-5).reverse(),[i.gamification.recentEvents]),O=e.useMemo(()=>i.errors.recent.slice(-5).reverse(),[i.errors.recent]);return s?Z.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:Z.jsxs("div",{className:"flex max-h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-xl bg-white shadow-2xl dark:bg-gray-900",children:[Z.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-6 dark:border-gray-800",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx(c,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),Z.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard de Analytics"})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsxs("button",{onClick:()=>{const e=He.exportData(),s=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`binomial-analytics-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},className:"btn-outline flex items-center gap-2",title:"Exportar dados",children:[Z.jsx(v,{className:"h-4 w-4"}),"Exportar"]}),Z.jsxs("button",{onClick:()=>{window.confirm("Tem certeza que deseja limpar todos os dados de analytics?")&&(He.clearData(),j())},className:"btn-outline flex items-center gap-2 text-red-600 hover:text-red-700",title:"Limpar dados",children:[Z.jsx(y,{className:"h-4 w-4"}),"Limpar"]}),Z.jsx("button",{onClick:t,className:"btn-secondary",children:"Fechar"})]})]}),Z.jsxs("div",{className:"grid flex-1 auto-rows-min gap-6 overflow-y-auto p-6",children:[Z.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:[Z.jsx(We,{icon:c,label:"Total de Cálculos",value:A(i.user.totalCalculations),accentClass:"text-blue-600 dark:text-blue-400"}),Z.jsx(We,{icon:N,label:"Tempo Médio de Cálculo",value:E(p),accentClass:"text-green-600 dark:text-green-400",children:"Dados das últimas execuções"}),Z.jsxs(We,{icon:k,label:"Sessão Atual",value:I(i.session.duration),accentClass:"text-orange-600 dark:text-orange-400",children:["Iniciada às ",_(i.session.start)]}),Z.jsx(We,{icon:w,label:"Pontuação de Engajamento",value:`${b}/100`,accentClass:"text-purple-600 dark:text-purple-400",children:"Combina sessões, cálculos e conquistas"})]}),Z.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:[Z.jsxs(We,{icon:P,label:"Sequência de Dias Ativos",value:`${null!=(a=i.user.calculationStreak.current)?a:0} dias`,accentClass:"text-amber-600 dark:text-amber-400",children:["Recorde: ",null!=(r=i.user.calculationStreak.longest)?r:0," dias"]}),Z.jsxs(We,{icon:M,label:"Conquistas",value:i.gamification.totals.achievements,accentClass:"text-emerald-600 dark:text-emerald-400",children:["Levels alcançados: ",i.gamification.totals.levelUps]}),Z.jsxs(We,{icon:d,label:"Desafios Concluídos",value:i.gamification.totals.challenges,accentClass:"text-rose-600 dark:text-rose-400",children:[i.gamification.totals.pointsAwarded," pts distribuídos"]}),Z.jsxs(We,{icon:C,label:"Erros Monitorados",value:i.errors.total,accentClass:"text-red-600 dark:text-red-400",children:["Contexto principal: ",q]})]}),Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-xl font-semibold text-gray-900 dark:text-white",children:"Parâmetros Mais Utilizados"}),n.length>0?Z.jsx("div",{className:"space-y-3",children:n.map((e,s)=>Z.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3 dark:bg-gray-800",children:[Z.jsxs("div",{className:"flex items-center gap-4",children:[Z.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-sm font-semibold text-blue-600 dark:bg-blue-900/40 dark:text-blue-300",children:s+1}),Z.jsxs("div",{children:[Z.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:["n=",e.n,", p=",e.p,", k=",e.k]}),Z.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.count," ",1===e.count?"uso":"usos"]})]})]}),Z.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e.count})]},`${e.n}-${e.p}-${e.k}`))}):Z.jsx("div",{className:"rounded-lg bg-gray-50 p-6 text-center text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Nenhum cálculo registrado ainda."})]}),Z.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Estatísticas de Memória"}),Z.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Uso Atual:"}),Z.jsx("span",{className:"font-semibold",children:S(h.current)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Média:"}),Z.jsx("span",{className:"font-semibold",children:S(h.average)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Pico:"}),Z.jsx("span",{className:"font-semibold",children:S(h.max)})]})]})]}),Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Informações do Dispositivo"}),Z.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Resolução:"}),Z.jsx("span",{className:"font-semibold",children:i.user.deviceInfo.screenResolution})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Idioma:"}),Z.jsx("span",{className:"font-semibold",children:i.user.deviceInfo.language})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Fuso Horário:"}),Z.jsx("span",{className:"font-semibold",children:i.user.deviceInfo.timezone})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Tamanho do Bundle:"}),Z.jsx("span",{className:"font-semibold",children:S(i.performance.bundleSize)})]})]})]})]}),m.length>0&&Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Presets Mais Usados"}),Z.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-3",children:m.map(e=>Z.jsxs("div",{className:"rounded-lg bg-gray-50 p-3 dark:bg-gray-800",children:[Z.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),Z.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.count," ",1===e.count?"uso":"usos"]})]},e.name))})]}),D.length>0&&Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Eventos Recentes de Gamificação"}),Z.jsx("div",{className:"space-y-3",children:D.map(e=>{var s;const t=Ke[e.type];return Z.jsxs("div",{className:"flex flex-col gap-1 rounded-lg bg-gray-50 p-3 dark:bg-gray-800",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{children:null!=(s=e.title)?s:t.label}),Z.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:_(e.timestamp)})]}),Z.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[Z.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold ${t.badgeClass}`,children:t.label}),void 0!==e.points&&Z.jsxs("span",{className:"rounded-full bg-black/10 px-2 py-0.5 text-xs font-medium dark:bg-white/10",children:["+",e.points," pts"]}),e.level&&Z.jsxs("span",{className:"rounded-full bg-black/10 px-2 py-0.5 text-xs font-medium dark:bg-white/10",children:["Nível ",e.level]})]}),e.description&&Z.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]},e.id)})})]}),Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Erros Recentes"}),O.length>0?Z.jsx("div",{className:"space-y-3",children:O.map((e,s)=>Z.jsxs("div",{className:"rounded-lg border border-red-100 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-900/30 dark:text-red-300",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{className:"font-semibold",children:e.name}),Z.jsx("span",{className:"text-xs",children:_(e.timestamp)})]}),Z.jsx("p",{className:"mt-1 text-sm",children:e.message}),e.context&&Z.jsxs("p",{className:"mt-1 text-xs uppercase tracking-wide",children:["Contexto: ",e.context]})]},`${e.timestamp}_${s}`))}):Z.jsx("div",{className:"rounded-lg bg-gray-50 p-6 text-center text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Nenhum erro registrado."})]})]})]})}):null};var Ze=Object.defineProperty,Ye=Object.defineProperties,es=Object.getOwnPropertyDescriptors,ss=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable,rs=(e,s,t)=>s in e?Ze(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,is=(e,s)=>{for(var t in s||(s={}))ts.call(s,t)&&rs(e,t,s[t]);if(ss)for(var t of ss(s))as.call(s,t)&&rs(e,t,s[t]);return e},ls=(e,s)=>Ye(e,es(s)),ns=(e,s,t)=>new Promise((a,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},l=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});const os=new class{constructor(){this.dbName="BinomialGamificationDB",this.dbVersion=1,this.db=null,this.userProgress=this.initializeUserProgress(),this.eventTarget=new EventTarget,this.initDatabase()}initializeUserProgress(){return{level:1,experience:0,totalPoints:0,achievements:this.getAllAchievements(),challenges:this.getAllChallenges(),stats:{totalCalculations:0,calculationsByMethod:{binomial:0,poisson:0,normal:0},averageAccuracy:0,presetsUsed:[],tutorialsCompleted:[],sessionStreak:0,longestSession:0},preferences:{notifications:!0,showProgress:!0,difficulty:"medium"},recentRewards:[]}}initDatabase(){return ns(this,null,function*(){return new Promise((e,s)=>{const t=indexedDB.open(this.dbName,this.dbVersion);t.onerror=()=>s(t.error),t.onsuccess=()=>{this.db=t.result,this.loadUserProgress().then(e).catch(s)},t.onupgradeneeded=e=>{const s=e.target.result;if(!s.objectStoreNames.contains("userProgress")){s.createObjectStore("userProgress",{keyPath:"id"}).createIndex("level","level",{unique:!1})}if(!s.objectStoreNames.contains("achievements")){const e=s.createObjectStore("achievements",{keyPath:"id"});e.createIndex("category","category",{unique:!1}),e.createIndex("rarity","rarity",{unique:!1})}if(!s.objectStoreNames.contains("challenges")){const e=s.createObjectStore("challenges",{keyPath:"id"});e.createIndex("difficulty","difficulty",{unique:!1}),e.createIndex("completed","completedAt",{unique:!1})}}})})}loadUserProgress(){return ns(this,null,function*(){if(this.db)return new Promise((e,s)=>{const t=this.db.transaction(["userProgress"],"readonly").objectStore("userProgress").get("main");t.onsuccess=()=>{var s,a,r;if(t.result){const e=is({},t.result);this.userProgress=ls(is(is({},this.userProgress),e),{achievements:null!=(s=e.achievements)?s:this.getAllAchievements(),challenges:null!=(a=e.challenges)?a:this.getAllChallenges(),recentRewards:null!=(r=e.recentRewards)?r:[]})}e()},t.onerror=()=>s(t.error)})})}saveUserProgress(){return ns(this,null,function*(){if(this.db)return new Promise((e,s)=>{const t=this.db.transaction(["userProgress"],"readwrite").objectStore("userProgress").put(ls(is({},this.userProgress),{id:"main"}));t.onsuccess=()=>e(),t.onerror=()=>s(t.error)})})}getAllAchievements(){return[{id:"first_calculation",title:"Primeiro Cálculo",description:"Realize seu primeiro cálculo probabilístico",icon:"🎯",category:"calculation",requirement:{type:"calculations_count",value:1,condition:"greater_than"},points:10,rarity:"common"},{id:"calculator_novice",title:"Calculadora Novata",description:"Realize 10 cálculos",icon:"📊",category:"calculation",requirement:{type:"calculations_count",value:10,condition:"greater_than"},points:25,rarity:"common"},{id:"calculator_expert",title:"Especialista em Cálculos",description:"Realize 100 cálculos",icon:"🏆",category:"calculation",requirement:{type:"calculations_count",value:100,condition:"greater_than"},points:100,rarity:"uncommon"},{id:"calculator_master",title:"Mestre Calculista",description:"Realize 1000 cálculos",icon:"👑",category:"calculation",requirement:{type:"calculations_count",value:1e3,condition:"greater_than"},points:500,rarity:"epic"},{id:"tutorial_complete",title:"Estudante Dedicado",description:"Complete o tutorial interativo",icon:"🎓",category:"learning",requirement:{type:"tutorial_completed",value:1,condition:"equals"},points:50,rarity:"uncommon"},{id:"glossary_explorer",title:"Explorador do Glossário",description:"Consulte o glossário 5 vezes",icon:"📚",category:"learning",requirement:{type:"tutorial_completed",value:5,condition:"greater_than"},points:30,rarity:"common"},{id:"preset_explorer",title:"Explorador de Cenários",description:"Use 5 presets diferentes",icon:"🗺️",category:"exploration",requirement:{type:"presets_used",value:5,condition:"greater_than"},points:40,rarity:"uncommon"},{id:"extreme_values",title:"Valores Extremos",description:"Teste com n > 10000",icon:"⚡",category:"exploration",requirement:{type:"parameters_range",value:1e4,condition:"greater_than",range:[1e4,1e5]},points:75,rarity:"rare"},{id:"precision_master",title:"Mestre da Precisão",description:"Mantenha 95% de precisão em 50 cálculos",icon:"🎯",category:"mastery",requirement:{type:"accuracy",value:95,condition:"greater_than"},points:200,rarity:"epic"},{id:"speed_demon",title:"Demônio da Velocidade",description:"Realize 10 cálculos em menos de 5 segundos",icon:"⚡",category:"mastery",requirement:{type:"calculations_count",value:10,condition:"equals"},points:150,rarity:"rare"}]}getAllChallenges(){return[{id:"beginner_binomial",title:"Iniciante Binomial",description:"Realize 5 cálculos binomiais com n < 50",difficulty:"easy",category:"calculation",requirements:{n:{min:1,max:50},method:"binomial"},reward:{points:25,achievements:["calculator_novice"]},attempts:0},{id:"poisson_explorer",title:"Explorador Poisson",description:"Use a aproximação Poisson com λ < 10",difficulty:"medium",category:"exploration",requirements:{n:{min:100,max:1e3},p:{min:.001,max:.1},method:"poisson"},reward:{points:50},attempts:0},{id:"normal_master",title:"Mestre Normal",description:"Use a aproximação Normal com np > 10",difficulty:"hard",category:"mastery",requirements:{n:{min:100,max:1e4},p:{min:.1,max:.9},method:"normal"},reward:{points:100},attempts:0},{id:"accuracy_challenge",title:"Desafio de Precisão",description:"Mantenha 90% de precisão em 20 cálculos",difficulty:"expert",category:"mastery",requirements:{accuracy:90},reward:{points:200,achievements:["precision_master"]},attempts:0}]}recordCalculation(e,s,t,a,r){return ns(this,null,function*(){if(this.userProgress.stats.totalCalculations++,this.userProgress.stats.calculationsByMethod[a]++,void 0!==r){const e=this.userProgress.stats.averageAccuracy,s=this.userProgress.stats.totalCalculations;this.userProgress.stats.averageAccuracy=(e*(s-1)+r)/s}const i=this.calculateExperienceGain(a,r);this.addExperience(i),this.userProgress.totalPoints+=i,this.evaluateChallenges(e,s,t,a,r);const l=yield this.checkAchievements(),n=yield this.checkLevelUp();return yield this.saveUserProgress(),{newAchievements:l,levelUp:n}})}recordPresetUse(e){return ns(this,null,function*(){this.userProgress.stats.presetsUsed.includes(e)||(this.userProgress.stats.presetsUsed.push(e),yield this.checkAchievements(),yield this.saveUserProgress())})}recordTutorialCompletion(e){return ns(this,null,function*(){this.userProgress.stats.tutorialsCompleted.includes(e)||(this.userProgress.stats.tutorialsCompleted.push(e),yield this.checkAchievements(),yield this.saveUserProgress())})}checkAchievements(){return ns(this,null,function*(){const e=[];for(const s of this.userProgress.achievements){if(s.unlockedAt)continue;let t=0,a=!1;switch(s.requirement.type){case"calculations_count":t=this.userProgress.stats.totalCalculations,a=this.checkCondition(t,s.requirement);break;case"presets_used":t=this.userProgress.stats.presetsUsed.length,a=this.checkCondition(t,s.requirement);break;case"tutorial_completed":t=this.userProgress.stats.tutorialsCompleted.length,a=this.checkCondition(t,s.requirement);break;case"accuracy":t=this.userProgress.stats.averageAccuracy,a=this.checkCondition(t,s.requirement)}a?(s.unlockedAt=Date.now(),s.progress=t,this.userProgress.totalPoints+=s.points,this.logReward({id:`${s.id}_${s.unlockedAt}`,type:"achievement",title:s.title,description:s.description,points:s.points,timestamp:s.unlockedAt,icon:s.icon,rarity:s.rarity}),e.push(s)):s.progress=t}return e.length>0&&this.emit("achievement_unlocked",{achievements:e.map(e=>is({},e)),totalPoints:this.userProgress.totalPoints,level:this.userProgress.level,timestamp:Date.now()}),e})}checkCondition(e,s){switch(s.condition){case"greater_than":return e>s.value;case"less_than":return e<s.value;case"equals":return e===s.value;case"between":return!!s.range&&(e>=s.range[0]&&e<=s.range[1]);default:return e>=s.value}}checkLevelUp(){return ns(this,null,function*(){let e=!1;for(;this.userProgress.experience>=this.getExperienceForLevel(this.userProgress.level+1);)this.userProgress.level++,e=!0;if(e){const e=Date.now();this.logReward({id:`level_${this.userProgress.level}_${e}`,type:"level_up",title:`Nível ${this.userProgress.level}`,description:"Parabéns! Você avançou para um novo nível.",points:0,timestamp:e,level:this.userProgress.level}),this.emit("level_up",{level:this.userProgress.level,experience:this.userProgress.experience,totalPoints:this.userProgress.totalPoints,timestamp:e})}return e})}getExperienceForLevel(e){return Math.floor(100*Math.pow(1.2,e-1))}addExperience(e){this.userProgress.experience+=e}getProgress(){return is({},this.userProgress)}getRecentRewards(){return[...this.userProgress.recentRewards]}getAchievements(){return this.userProgress.achievements.map(e=>is({},e))}getChallenges(){return this.userProgress.challenges.map(e=>is({},e))}getUnlockedAchievements(){return this.userProgress.achievements.filter(e=>void 0!==e.unlockedAt)}getLockedAchievements(){return this.userProgress.achievements.filter(e=>void 0===e.unlockedAt)}getProgressToNextLevel(){const e=this.userProgress.level,s=this.userProgress.experience,t=this.getExperienceForLevel(e+1),a=this.getExperienceForLevel(e),r=s-a,i=t-a;return{current:r,needed:i,percentage:r/i*100}}completeChallenge(e){return ns(this,null,function*(){var s;const t=this.userProgress.challenges.find(s=>s.id===e);return!(!t||t.completedAt)&&(!t.completedAt&&(this.finalizeChallengeCompletion(t,Date.now()),this.emit("challenge_completed",{challenge:is({},t),totalPoints:this.userProgress.totalPoints,timestamp:null!=(s=t.completedAt)?s:Date.now()}),yield this.saveUserProgress(),!0))})}updatePreferences(e){this.userProgress.preferences=is(is({},this.userProgress.preferences),e),this.saveUserProgress()}resetProgress(){return ns(this,null,function*(){this.userProgress=this.initializeUserProgress(),yield this.saveUserProgress(),this.emit("progress_reset",{timestamp:Date.now()})})}exportProgress(){return ns(this,null,function*(){return JSON.stringify(this.userProgress,null,2)})}subscribe(e,s){const t=e=>{s(e.detail)};return this.eventTarget.addEventListener(e,t),()=>{this.eventTarget.removeEventListener(e,t)}}calculateExperienceGain(e,s){return("binomial"===e?10:"poisson"===e?12:14)+(s?Math.round(s/100*5):0)+2*Math.min(this.userProgress.stats.sessionStreak,5)}logReward(e){this.userProgress.recentRewards=[e,...this.userProgress.recentRewards].slice(0,25)}emit(e,s){const t=new CustomEvent(e,{detail:s});switch(this.eventTarget.dispatchEvent(t),e){case"achievement_unlocked":{const e=s;He.trackGamificationEvent("achievement",{count:e.achievements.length,ids:e.achievements.map(e=>e.id),title:1===e.achievements.length?e.achievements[0].title:`${e.achievements.length} conquistas desbloqueadas`,points:e.achievements.reduce((e,s)=>e+s.points,0),totalPoints:e.totalPoints,level:e.level});break}case"level_up":{const e=s;He.trackGamificationEvent("level_up",{level:e.level,experience:e.experience,totalPoints:e.totalPoints,title:`Nível ${e.level}`});break}case"challenge_completed":{const e=s;He.trackGamificationEvent("challenge",{id:e.challenge.id,difficulty:e.challenge.difficulty,title:e.challenge.title,description:e.challenge.description,points:e.challenge.reward.points,totalPoints:e.totalPoints});break}}}evaluateChallenges(e,s,t,a,r){const i=Date.now(),l=[];for(const n of this.userProgress.challenges){if(n.completedAt)continue;const o=n.requirements;if(!(!o.method||o.method===a))continue;n.attempts++;const c=!o.n||e>=o.n.min&&e<=o.n.max,d=!o.p||s>=o.p.min&&s<=o.p.max,m=!o.k||t>=o.k.min&&t<=o.k.max,x=!o.accuracy||(null!=r?r:0)>=o.accuracy;c&&d&&m&&x&&(this.finalizeChallengeCompletion(n,i),l.push(n))}if(l.length>0)for(const n of l)this.emit("challenge_completed",{challenge:is({},n),totalPoints:this.userProgress.totalPoints,timestamp:i})}finalizeChallengeCompletion(e,s){e.completedAt||(e.completedAt=s,this.userProgress.totalPoints+=e.reward.points,this.logReward({id:`${e.id}_${s}`,type:"challenge",title:e.title,description:e.description,points:e.reward.points,timestamp:s}),e.reward.achievements&&e.reward.achievements.length>0&&this.unlockAchievementsByIds(e.reward.achievements,s))}unlockAchievementsByIds(e,s){const t=[];for(const a of e){const e=this.userProgress.achievements.find(e=>e.id===a);e&&!e.unlockedAt&&(e.unlockedAt=s,e.progress=this.userProgress.stats.totalCalculations,this.userProgress.totalPoints+=e.points,this.logReward({id:`${e.id}_${s}`,type:"achievement",title:e.title,description:e.description,points:e.points,timestamp:s,icon:e.icon,rarity:e.rarity}),t.push(e))}return t.length>0&&this.emit("achievement_unlocked",{achievements:t.map(e=>is({},e)),totalPoints:this.userProgress.totalPoints,level:this.userProgress.level,timestamp:s}),t}};var cs=Object.defineProperty,ds=Object.defineProperties,ms=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,ps=(e,s,t)=>s in e?cs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,gs=(e,s)=>{for(var t in s||(s={}))hs.call(s,t)&&ps(e,t,s[t]);if(xs)for(var t of xs(s))us.call(s,t)&&ps(e,t,s[t]);return e},bs=(e,s)=>ds(e,ms(s));const fs=[{id:"achievements",label:"Conquistas",icon:M},{id:"challenges",label:"Desafios",icon:d},{id:"stats",label:"Estatísticas",icon:k}],js=({isOpen:s,onClose:t})=>{const[r,i]=e.useState(os.getProgress()),[l,n]=e.useState("achievements"),[o,c]=e.useState(!1);e.useEffect(()=>{s&&i(os.getProgress())},[s]);const d=e=>{switch(e){case"common":default:return"text-gray-500 dark:text-gray-400";case"uncommon":return"text-green-500 dark:text-green-400";case"rare":return"text-blue-500 dark:text-blue-400";case"epic":return"text-purple-500 dark:text-purple-400";case"legendary":return"text-yellow-500 dark:text-yellow-400"}},m=e=>{switch(e){case"easy":return"text-green-500 dark:text-green-400";case"medium":return"text-yellow-500 dark:text-yellow-400";case"hard":return"text-orange-500 dark:text-orange-400";case"expert":return"text-red-500 dark:text-red-400";default:return"text-gray-500 dark:text-gray-400"}},x=e=>e.toLocaleString();if(!s)return null;const h=os.getProgressToNextLevel(),u=r.achievements.filter(e=>e.unlockedAt),p=r.achievements.filter(e=>!e.unlockedAt),g=r.challenges.filter(e=>e.completedAt),b=r.challenges.filter(e=>!e.completedAt);return Z.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Z.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[Z.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx(S,{className:"w-6 h-6 text-yellow-500"}),Z.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sistema de Gamificação"})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsxs("button",{onClick:()=>c(!o),className:"btn-outline flex items-center gap-2",children:[Z.jsx(a,{className:"w-4 h-4"}),"Configurações"]}),Z.jsx("button",{onClick:t,className:"btn-secondary",children:"Fechar"})]})]}),o&&Z.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center gap-4",children:[Z.jsxs("label",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"checkbox",checked:r.preferences.notifications,onChange:e=>{const s=gs({},r);s.preferences.notifications=e.target.checked,os.updatePreferences({notifications:e.target.checked}),i(s)},className:"rounded"}),Z.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Notificações"})]}),Z.jsxs("label",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"checkbox",checked:r.preferences.showProgress,onChange:e=>{os.updatePreferences({showProgress:e.target.checked}),i(bs(gs({},r),{preferences:bs(gs({},r.preferences),{showProgress:e.target.checked})}))},className:"rounded"}),Z.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mostrar Progresso"})]})]}),Z.jsxs("button",{onClick:()=>{return e=void 0,s=null,t=function*(){window.confirm("Tem certeza que deseja resetar todo o progresso? Esta ação não pode ser desfeita.")&&(yield os.resetProgress(),i(os.getProgress()))},new Promise((a,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},l=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});var e,s,t},className:"btn-outline text-red-600 hover:text-red-700 flex items-center gap-2",children:[Z.jsx(E,{className:"w-4 h-4"}),"Resetar Progresso"]})]})}),Z.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[Z.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Nível ",r.level]}),Z.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.current," / ",h.needed," XP para o próximo nível"]})]}),Z.jsxs("div",{className:"text-right",children:[Z.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[x(r.totalPoints)," pts"]}),Z.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Experiência"})]})]}),Z.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:Z.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(h.percentage,100)}%`}})})]}),Z.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:fs.map(({id:e,label:s,icon:t})=>Z.jsxs("button",{onClick:()=>n(e),className:"flex items-center gap-2 px-6 py-3 font-medium transition-colors "+(l===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[Z.jsx(t,{className:"w-4 h-4"}),s]},e))}),Z.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-300px)]",children:["achievements"===l&&Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Conquistas Desbloqueadas (",u.length,")"]}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(e=>Z.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:Z.jsxs("div",{className:"flex items-start gap-3",children:[Z.jsx("div",{className:"text-2xl",children:e.icon}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Z.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),Z.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-green-100 dark:bg-green-800 ${d(e.rarity)}`,children:e.rarity})]}),Z.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["+",e.points," pts"]}),Z.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.unlockedAt?new Date(e.unlockedAt).toLocaleDateString():""})]})]})]})},e.id))})]}),Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Conquistas Bloqueadas (",p.length,")"]}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>Z.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg opacity-60",children:Z.jsxs("div",{className:"flex items-start gap-3",children:[Z.jsx("div",{className:"text-2xl grayscale",children:e.icon}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Z.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"???"}),Z.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-600 ${d(e.rarity)}`,children:e.rarity})]}),Z.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Conquista secreta! Continue explorando para descobrir."}),Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["+",e.points," pts"]}),Z.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:void 0!==e.progress?`${e.progress}%`:"0%"})]})]})]})},e.id))})]})]}),"challenges"===l&&Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Desafios Ativos (",b.length,")"]}),Z.jsx("div",{className:"space-y-4",children:b.map(e=>Z.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:Z.jsx("div",{className:"flex items-start justify-between",children:Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Z.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),Z.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-800 ${m(e.difficulty)}`,children:e.difficulty})]}),Z.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),Z.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Z.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:["+",e.reward.points," pts"]}),Z.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[e.attempts," tentativas"]})]})]})})},e.id))})]}),Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Desafios Completos (",g.length,")"]}),Z.jsx("div",{className:"space-y-4",children:g.map(e=>Z.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:Z.jsx("div",{className:"flex items-start justify-between",children:Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Z.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),Z.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-400",children:"Completo"})]}),Z.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),Z.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Z.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["+",e.reward.points," pts"]}),Z.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():""})]})]})})},e.id))})]})]}),"stats"===l&&Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Estatísticas de Cálculos"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total:"}),Z.jsx("span",{className:"font-semibold",children:x(r.stats.totalCalculations)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Binomial:"}),Z.jsx("span",{className:"font-semibold",children:x(r.stats.calculationsByMethod.binomial)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Poisson:"}),Z.jsx("span",{className:"font-semibold",children:x(r.stats.calculationsByMethod.poisson)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Normal:"}),Z.jsx("span",{className:"font-semibold",children:x(r.stats.calculationsByMethod.normal)})]})]})]}),Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Progresso de Aprendizado"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Presets Usados:"}),Z.jsx("span",{className:"font-semibold",children:r.stats.presetsUsed.length})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tutoriais:"}),Z.jsx("span",{className:"font-semibold",children:r.stats.tutorialsCompleted.length})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Precisão Média:"}),Z.jsxs("span",{className:"font-semibold",children:[r.stats.averageAccuracy.toFixed(1),"%"]})]})]})]}),Z.jsxs("div",{className:"theme-card p-6",children:[Z.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Estatísticas de Sessão"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sequência:"}),Z.jsxs("span",{className:"font-semibold",children:[r.stats.sessionStreak," dias"]})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sessão Mais Longa:"}),Z.jsx("span",{className:"font-semibold",children:vs(r.stats.longestSession)})]})]})]})]})]})]})})},vs=e=>`${Math.floor(e/6e4)}:${Math.floor(e%6e4/1e3).toString().padStart(2,"0")}`,ys=e.lazy(()=>se(()=>import("./AdditionalCharts-7wKvQ8b7.js"),__vite__mapDeps([0,1,2,3]))),Ns=e.lazy(()=>se(()=>import("./BinomialExplainer-bc9O9uXL.js"),__vite__mapDeps([4,1,3,2]))),ks=e.lazy(()=>se(()=>import("./InteractiveTutorial-CkMFwljL.js"),__vite__mapDeps([5,1,3,2]))),ws=e.lazy(()=>se(()=>import("./Glossary-BIXtlicf.js"),__vite__mapDeps([6,1,3,2]))),Ps=e.lazy(()=>se(()=>import("./MobileChart-ByBkQYcn.js"),__vite__mapDeps([7,1,3,2]))),Ms=()=>Z.jsx("div",{className:"flex items-center justify-center p-8",children:Z.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}),Cs=()=>{const s=le(),a=(()=>{const[s,t]=e.useState({isOpen:!1,type:null});return{modalState:s,openModal:e=>{t({isOpen:!0,type:e})},closeModal:()=>{t({isOpen:!1,type:null})}}})(),l=(()=>{const[s,t]=e.useState(!1);return{isOpen:s,openTutorial:()=>t(!0),closeTutorial:()=>t(!1)}})(),[n,o]=t.useState(!1),[d,m]=t.useState("intro"),[x,h]=t.useState("intro"),[u,p]=t.useState(!1),[g,b]=t.useState(!1),v=oe(s.n,300),y=oe(s.p,300),N=oe(s.k,300);e.useEffect(()=>{Xe(void 0,null,function*(){if("undefined"!=typeof window)try{const e=yield se(()=>import("./web-vitals-JUmagUuJ.js"),[]);[{handler:e.onCLS,label:"CLS"},{handler:e.onFID,label:"FID"},{handler:e.onFCP,label:"FCP"},{handler:e.onLCP,label:"LCP"},{handler:e.onTTFB,label:"TTFB"}].forEach(({handler:e,label:s})=>{null==e||e(e=>{He.trackPerformance(s,e.value)})})}catch(e){}}),He.track("app_loaded",{userAgent:navigator.userAgent,timestamp:Date.now()})},[]),e.useEffect(()=>{if(s.validInput&&s.results.exact>0){const e=performance.now(),t=performance.now();He.trackCalculation(s.n,s.p,s.k,t-e,"binomial"),os.recordCalculation(s.n,s.p,s.k,"binomial",95).then(({newAchievements:e,levelUp:s})=>{e.length})}},[s.n,s.p,s.k,s.validInput,s.results.exact]);const k=e=>{if(e<=1)return 1;let s=1;for(let t=2;t<=e;t++)s*=t;return s},{binomialData:w,poissonData:P,normalData:M}=(()=>{if(!s.validInput)return{binomialData:[],poissonData:[],normalData:[]};const e=Math.min(s.n+1,100),t=[];for(let i=0;i<e;i++){const e=k(s.n)/(k(i)*k(s.n-i))*Math.pow(s.p,i)*Math.pow(1-s.p,s.n-i);t.push(isFinite(e)?e:0)}const a=s.showPoisson?t.map((e,t)=>{const a=s.n*s.p;return Math.pow(a,t)*Math.exp(-a)/k(t)}):void 0,r=s.showNormal?t.map((e,t)=>{const a=s.n*s.p,r=Math.sqrt(s.n*s.p*(1-s.p));return Math.exp(-.5*Math.pow((t-a)/r,2))/(r*Math.sqrt(2*Math.PI))}):void 0;return{binomialData:t,poissonData:a,normalData:r}})();t.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})},[]);const C=e=>{m(e),h("intro"===e?"intro":e=>"intro"===e?"calculator":e),He.trackUIInteraction("primary_tab","change",e)};return Z.jsxs("div",{className:"min-h-screen theme-bg-gradient transition-all duration-500 overflow-x-hidden",children:[Z.jsx(De,{onNavigate:e=>{if("intro"===e)return void C("intro");const s=["calculator","charts","explanation","help","settings"].includes(e)?e:"calculator";C("calculator"),h(s),He.trackUIInteraction("mobile_navigation","navigate",e)},currentSection:"intro"===d?"intro":x}),Z.jsxs("div",{className:"w-full max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-8 pt-16 lg:pt-8",children:[Z.jsxs("div",{className:"flex items-start justify-between mb-6 sm:mb-8 animate-fade-in-up",children:[Z.jsx("div",{className:"flex-1"}),Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("button",{onClick:()=>{p(!0),He.trackUIInteraction("analytics_button","click")},className:"flex items-center justify-center w-12 h-12 bg-white/80 hover:bg-white dark:bg-slate-800/80 dark:hover:bg-slate-800 rounded-2xl transition-all duration-300 group hover-lift glass-card",title:"Analytics Dashboard",children:Z.jsx(c,{className:"w-5 h-5 text-slate-600 dark:text-slate-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200"})}),Z.jsx("button",{onClick:()=>{b(!0),He.trackUIInteraction("gamification_button","click")},className:"flex items-center justify-center w-12 h-12 bg-white/80 hover:bg-white dark:bg-slate-800/80 dark:hover:bg-slate-800 rounded-2xl transition-all duration-300 group hover-lift glass-card",title:"Sistema de Gamificação",children:Z.jsx(S,{className:"w-5 h-5 text-slate-600 dark:text-slate-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200"})}),Z.jsx("a",{href:"https://github.com/jonhvito/Binomial",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-white/80 hover:bg-white dark:bg-slate-800/80 dark:hover:bg-slate-800 rounded-2xl transition-all duration-300 group hover-lift glass-card",title:"Ver repositório no GitHub",children:Z.jsx(I,{className:"w-5 h-5 text-slate-600 dark:text-slate-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200"})}),Z.jsx(qe,{})]})]}),Z.jsxs("div",{className:"text-center mb-6 lg:mb-8 w-full animate-fade-in-up",children:[Z.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold theme-text mb-4 px-2 sm:px-0 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Calculadora Didática de Probabilidade Binomial"}),Z.jsxs("p",{className:"text-base sm:text-lg lg:text-xl theme-text-secondary max-w-4xl mx-auto px-4 sm:px-2 leading-relaxed",children:["Descubra a probabilidade de ocorrer mais de ",Z.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:"k"}),' "sucessos" em',Z.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:" n"})," tentativas, comparando o cálculo ",Z.jsx("span",{className:"font-semibold text-accent-600 dark:text-accent-400",children:"Binomial exato "}),"com as aproximações ",Z.jsx("span",{className:"font-semibold text-secondary-600 dark:text-secondary-400",children:"Poisson"})," e ",Z.jsx("span",{className:"font-semibold text-warning-600 dark:text-warning-400",children:"Normal"}),"."]}),Z.jsxs("div",{className:"mt-6 lg:mt-8 flex flex-wrap justify-center gap-3 lg:gap-4 px-4 sm:px-2 w-full overflow-x-auto",children:[Z.jsxs("button",{onClick:l.openTutorial,className:"flex items-center gap-2 lg:gap-3 px-4 lg:px-6 py-3 bg-accent-100 hover:bg-accent-200 dark:bg-accent-900 dark:hover:bg-accent-800 text-accent-700 dark:text-accent-300 rounded-xl transition-all duration-300 font-semibold text-sm lg:text-base whitespace-nowrap hover-lift hover-glow",children:[Z.jsx(A,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"}),"Tour Guiado"]}),Z.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 lg:gap-3 px-4 lg:px-6 py-3 bg-secondary-100 hover:bg-secondary-200 dark:bg-secondary-900 dark:hover:bg-secondary-800 text-secondary-700 dark:text-secondary-300 rounded-xl transition-all duration-300 font-semibold text-sm lg:text-base whitespace-nowrap hover-lift hover-glow",children:[Z.jsx(_,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"}),"Glossário"]}),Z.jsxs("button",{onClick:()=>a.openModal("history"),className:"flex items-center gap-2 lg:gap-3 px-4 lg:px-6 py-3 bg-primary-100 hover:bg-primary-200 dark:bg-primary-900 dark:hover:bg-primary-800 text-primary-700 dark:text-primary-300 rounded-xl transition-all duration-300 font-semibold text-sm lg:text-base whitespace-nowrap hover-lift hover-glow",children:[Z.jsx(j,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"}),"História"]}),Z.jsxs("button",{onClick:()=>a.openModal("manual_calc"),className:"flex items-center gap-2 lg:gap-3 px-4 lg:px-6 py-3 bg-warning-100 hover:bg-warning-200 dark:bg-warning-900 dark:hover:bg-warning-800 text-warning-700 dark:text-warning-300 rounded-xl transition-all duration-300 font-semibold text-sm lg:text-base whitespace-nowrap hover-lift hover-glow",children:[Z.jsx(i,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"}),"Cálculo Manual"]}),Z.jsxs("button",{onClick:()=>a.openModal("faq"),className:"flex items-center gap-2 lg:gap-3 px-4 lg:px-6 py-3 bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-xl transition-all duration-300 font-semibold text-sm lg:text-base whitespace-nowrap hover-lift hover-glow",children:[Z.jsx(r,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"}),"FAQ"]})]}),"calculator"===d&&Z.jsx("div",{className:"mt-6 lg:mt-8 max-w-3xl mx-auto px-4 sm:px-2 lg:px-0",children:Z.jsx("div",{className:"gradient-card rounded-2xl p-6 mx-4 sm:mx-2 lg:mx-auto animate-fade-in-up",children:Z.jsxs("p",{className:"text-base lg:text-lg theme-text-secondary leading-relaxed",children:[Z.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:"Exemplo:"})," uma fábrica produz ",Z.jsx("span",{className:"font-bold text-accent-600 dark:text-accent-400",children:"2%"})," de peças defeituosas. Em um lote de ",Z.jsx("span",{className:"font-bold text-accent-600 dark:text-accent-400",children:"100"})," peças, qual a probabilidade de encontrar",Z.jsx("span",{className:"font-bold text-warning-600 dark:text-warning-400",children:" mais de 5 defeituosas"}),"?",Z.jsx("br",{}),Z.jsx("span",{className:"text-sm mt-2 block text-slate-600 dark:text-slate-400",children:'(n=100, p=0.02, k=5 — selecione "Caso 1" abaixo.)'})]})})})]}),Z.jsx("div",{className:"mt-8 lg:mt-10 flex justify-center",children:Z.jsxs("div",{className:"flex bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border border-white/40 dark:border-slate-700 rounded-full p-1 shadow-lg gap-1",children:[Z.jsxs("button",{onClick:()=>C("intro"),className:"flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-semibold transition-all duration-200 "+("intro"===d?"bg-primary-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-white/60 dark:hover:bg-slate-700/80"),children:[Z.jsx(f,{className:"w-4 h-4"}),"Introdução"]}),Z.jsxs("button",{onClick:()=>C("calculator"),className:"flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-semibold transition-all duration-200 "+("calculator"===d?"bg-secondary-600 text-white shadow":"text-slate-600 dark:text-slate-300 hover:bg-white/60 dark:hover:bg-slate-700/80"),children:[Z.jsx(i,{className:"w-4 h-4"}),"Calculadora"]})]})}),"intro"===d?Z.jsx("div",{className:"mt-8 lg:mt-10",children:Z.jsx(Ie,{onGoToCalculator:()=>{He.trackUIInteraction("intro_tab","cta_calculator"),C("calculator"),"undefined"!=typeof window&&window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},onOpenFAQ:()=>{He.trackUIInteraction("intro_tab","cta_faq"),a.openModal("faq")}})}):Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 mb-6 lg:mb-8 mx-2 sm:mx-0 w-full max-w-full overflow-hidden animate-fade-in-up",children:Z.jsxs("div",{className:"flex items-start gap-4",children:[Z.jsx("div",{className:"text-3xl animate-float",children:"💡"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsx("h3",{className:"font-bold text-lg lg:text-xl theme-text mb-3",children:"Como usar esta aplicação didática:"}),Z.jsxs("ul",{className:"space-y-2 text-sm lg:text-base theme-text-secondary",children:[Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"1."}),"Comece com o ",Z.jsx("span",{className:"font-semibold text-accent-600 dark:text-accent-400",children:"Tour Guiado"})," para conhecer todas as funcionalidades"]}),Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"2."}),"Escolha um dos ",Z.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:"Cenários Práticos"})," para ver exemplos reais"]}),Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"3."}),"Ajuste os parâmetros (",Z.jsx("span",{className:"font-semibold text-warning-600 dark:text-warning-400",children:"n"}),", ",Z.jsx("span",{className:"font-semibold text-warning-600 dark:text-warning-400",children:"p"}),", ",Z.jsx("span",{className:"font-semibold text-warning-600 dark:text-warning-400",children:"k"}),") e veja mudanças em tempo real"]}),Z.jsxs("li",{className:"flex items-start gap-2 hidden md:flex",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"4."}),"Explore as ",Z.jsx("span",{className:"font-semibold text-secondary-600 dark:text-secondary-400",children:"Visualizações Avançadas"})," e a ",Z.jsx("span",{className:"font-semibold text-secondary-600 dark:text-secondary-400",children:"Explicação Passo-a-Passo"})]}),Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"5."}),"Consulte o ",Z.jsx("span",{className:"font-semibold text-secondary-600 dark:text-secondary-400",children:"Glossário"})," para entender os conceitos matemáticos"]}),Z.jsxs("li",{className:"flex items-start gap-2",children:[Z.jsx("span",{className:"text-accent-500 font-bold",children:"6."}),"Use os ícones (?) para obter ajuda contextual sobre cada elemento"]})]})]})]})}),Z.jsxs("div",{className:"w-full grid grid-cols-1 xl:grid-cols-2 gap-6 sm:gap-8 lg:gap-12 max-w-full overflow-hidden",children:[Z.jsxs("div",{className:"space-y-6 lg:space-y-8 w-full min-w-0",children:[Z.jsx("div",{"data-tutorial":"presets",className:"w-full animate-slide-in-left",children:Z.jsx(me,{onApplyPreset:s.applyPreset})}),Z.jsx("div",{"data-tutorial":"parameters",className:"w-full animate-slide-in-left",style:{animationDelay:"0.1s"},children:Z.jsx(ce,{n:s.n,p:s.p,k:s.k,onNChange:s.setN,onPChange:s.setP,onKChange:s.setK,onOpenModal:a.openModal})}),Z.jsx("div",{className:"w-full animate-slide-in-left",style:{animationDelay:"0.2s"},children:Z.jsx(he,{showPoisson:s.showPoisson,showNormal:s.showNormal,onShowPoissonChange:s.setShowPoisson,onShowNormalChange:s.setShowNormal})})]}),Z.jsxs("div",{className:"space-y-6 lg:space-y-8 w-full min-w-0",children:[Z.jsx("div",{"data-tutorial":"results",className:"w-full animate-slide-in-right",children:Z.jsx(fe,{validInput:s.validInput,validationErrors:s.validationErrors,results:s.results,showPoisson:s.showPoisson,showNormal:s.showNormal,k:s.k,onOpenModal:a.openModal,smartTips:s.smartTips})}),Z.jsx("div",{"data-tutorial":"chart",className:"hidden md:block w-full animate-slide-in-right",style:{animationDelay:"0.1s"},children:Z.jsx(Me,{validInput:s.validInput,chartData:s.chartData,n:s.n,p:s.p,k:s.k})}),Z.jsx("div",{className:"md:hidden w-full",children:Z.jsx(e.Suspense,{fallback:Z.jsx(Ms,{}),children:Z.jsx(Ps,{validInput:s.validInput,n:v,p:y,k:N,results:s.results})})})]})]}),Z.jsxs("div",{className:"mt-8 lg:mt-12 space-y-8 lg:space-y-12 w-full max-w-full overflow-hidden",children:[Z.jsx("div",{"data-tutorial":"explainer",className:"w-full animate-fade-in-up",style:{animationDelay:"0.3s"},children:Z.jsx(e.Suspense,{fallback:Z.jsx(Ms,{}),children:Z.jsx(Ns,{n:v,p:y,k:N})})}),Z.jsx("div",{"data-tutorial":"advanced",className:"hidden lg:block w-full animate-fade-in-up",style:{animationDelay:"0.4s"},children:Z.jsx(e.Suspense,{fallback:Z.jsx(Ms,{}),children:Z.jsx(ys,{validInput:s.validInput,n:v,p:y,showPoisson:s.showPoisson,showNormal:s.showNormal,binomialData:w,poissonData:P,normalData:M})})}),Z.jsx("div",{className:"lg:hidden w-full animate-fade-in-up",style:{animationDelay:"0.4s"},children:Z.jsxs("div",{className:"theme-card-elevated rounded-2xl p-6 text-center",children:[Z.jsx("div",{className:"text-4xl mb-4 animate-float",children:"📈"}),Z.jsx("h3",{className:"font-bold text-lg theme-text mb-3",children:"Visualizações Avançadas"}),Z.jsx("p",{className:"text-sm theme-text-secondary leading-relaxed mb-4",children:"Gráficos comparativos detalhados, histogramas e análises visuais estão disponíveis na versão desktop para melhor experiência."}),Z.jsx("div",{className:"badge badge-accent",children:Z.jsx("span",{className:"text-xs",children:"Todos os cálculos e explicações estão funcionais! 🧮"})})]})})]}),Z.jsx("footer",{className:"mt-12 lg:mt-16 text-center theme-text-secondary text-sm max-w-5xl mx-auto px-4 sm:px-2 lg:px-0 w-full animate-fade-in-up",style:{animationDelay:"0.5s"},children:Z.jsxs("div",{className:"theme-card-elevated rounded-2xl p-6 lg:p-8 w-full max-w-full overflow-hidden",children:[Z.jsxs("p",{className:"mb-6 lg:mb-8 text-sm lg:text-base leading-relaxed",children:[Z.jsx("span",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:"📚 Esta aplicação didática"}),' ilustra conceitos fundamentais de estatística através de um problema clássico: contar "sucessos" em tentativas independentes. Use todas as ferramentas disponíveis para aprofundar sua compreensão da distribuição binomial e suas aproximações.']}),Z.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 lg:gap-4",children:[Z.jsx("div",{className:"badge badge-primary",children:Z.jsx("span",{className:"text-xs",children:"🎯 Casos práticos reais"})}),Z.jsx("div",{className:"badge badge-accent",children:Z.jsx("span",{className:"text-xs",children:"📊 Múltiplas visualizações"})}),Z.jsx("div",{className:"badge badge-warning",children:Z.jsx("span",{className:"text-xs",children:"🧮 Cálculos detalhados"})}),Z.jsx("div",{className:"badge badge-secondary",children:Z.jsx("span",{className:"text-xs",children:"📖 Glossário completo"})}),Z.jsx("div",{className:"badge badge-primary",children:Z.jsx("span",{className:"text-xs",children:"🎓 Tutorial interativo"})}),Z.jsx("div",{className:"badge badge-neutral",children:Z.jsx("span",{className:"text-xs",children:"🌙 Modo escuro/claro"})})]})]})})]})]}),Z.jsx(Ee,{isOpen:a.modalState.isOpen,onClose:a.closeModal,type:a.modalState.type}),Z.jsx(e.Suspense,{fallback:Z.jsx(Ms,{}),children:Z.jsx(ks,{isOpen:l.isOpen,onClose:l.closeTutorial})}),Z.jsx(e.Suspense,{fallback:Z.jsx(Ms,{}),children:Z.jsx(ws,{isOpen:n,onClose:()=>o(!1)})}),Z.jsx(Je,{isOpen:u,onClose:()=>p(!1)}),Z.jsx(js,{isOpen:g,onClose:()=>b(!1)})]})},Ss={achievement:{gradient:"from-emerald-500/95 via-emerald-400/95 to-emerald-500/90",icon:M,accent:"text-emerald-100",label:"Conquista Desbloqueada"},level_up:{gradient:"from-indigo-500/95 via-violet-500/95 to-fuchsia-500/90",icon:q,accent:"text-indigo-100",label:"Level Up"},challenge:{gradient:"from-amber-500/95 via-orange-500/95 to-red-500/90",icon:d,accent:"text-amber-100",label:"Desafio Completo"}},Es=({notifications:s,onDismiss:t})=>{const a=e.useRef({});e.useEffect(()=>{const e=new Set(s.map(e=>e.id));return s.forEach(e=>{if(a.current[e.id])return;const s=window.setTimeout(()=>{t(e.id),delete a.current[e.id]},6e3);a.current[e.id]=s}),Object.keys(a.current).forEach(s=>{e.has(s)||(window.clearTimeout(a.current[s]),delete a.current[s])}),()=>{Object.values(a.current).forEach(e=>{window.clearTimeout(e)}),a.current={}}},[s,t]);const r=e.useMemo(()=>[...s].sort((e,s)=>s.timestamp-e.timestamp),[s]);return 0===r.length?null:Z.jsx("div",{className:"fixed top-6 right-6 z-[120] flex w-full max-w-sm flex-col gap-3",role:"status","aria-live":"assertive",children:r.map(e=>{var s;const a=Ss[e.type],r=a.icon,i=null!=(s=e.points)?s:0,l=new Date(e.timestamp);return Z.jsxs("div",{className:`relative overflow-hidden rounded-2xl shadow-2xl backdrop-blur-md transition-transform duration-300 hover:-translate-y-1 hover:shadow-[0_25px_50px_-15px_rgba(0,0,0,0.45)] bg-gradient-to-br ${a.gradient}`,children:[Z.jsx("div",{className:"absolute inset-0 bg-white/10 mix-blend-overlay","aria-hidden":"true"}),Z.jsxs("div",{className:"relative flex items-start gap-4 p-4 text-white",children:[Z.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-white/15 backdrop-blur-lg",children:Z.jsx(r,{className:"h-6 w-6"})}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:[Z.jsx("span",{className:`font-semibold ${a.accent}`,children:a.label}),e.badge&&Z.jsx("span",{className:"rounded-full bg-white/15 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wider",children:e.badge})]}),Z.jsx("h4",{className:"mt-1 text-lg font-bold",children:e.title}),Z.jsx("p",{className:"mt-1 text-sm text-white/90",children:e.description}),Z.jsxs("div",{className:"mt-3 flex items-center gap-3 text-xs text-white/80",children:[Z.jsxs("span",{children:[l.toLocaleDateString()," • ",l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),i>0&&Z.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-black/20 px-2 py-0.5 text-xs font-semibold",children:["+",i," pts"]}),e.level&&Z.jsxs("span",{className:"rounded-full bg-black/20 px-2 py-0.5 text-xs font-semibold",children:["Nível ",e.level]})]})]}),Z.jsx("button",{onClick:()=>t(e.id),className:"rounded-full p-1 text-white/80 transition hover:bg-white/20 hover:text-white","aria-label":"Fechar notificação",children:Z.jsx(h,{className:"h-4 w-4"})})]})]},e.id)})})},Is=["achievement_unlocked","level_up","challenge_completed"],As=e=>({id:`level_${e.level}_${e.timestamp}`,type:"level_up",title:`Nível ${e.level} alcançado!`,description:"Continue acumulando XP para desbloquear conteúdos exclusivos.",points:0,timestamp:e.timestamp,icon:"🚀",level:e.level,badge:"Level Up"}),_s=e=>({id:`${e.challenge.id}_${e.timestamp}`,type:"challenge",title:`Desafio completo: ${e.challenge.title}`,description:e.challenge.description,points:e.challenge.reward.points,timestamp:e.timestamp,icon:"🎯",badge:`Desafio • ${e.challenge.difficulty}`});function qs(){const{notifications:s,dismiss:t}=(()=>{const[s,t]=e.useState([]),a=e.useCallback(e=>{t(s=>{if(0===e.length)return s;const t=new Set(s.map(e=>e.id)),a=[...s];for(const r of e)t.has(r.id)||a.push(r);return a.length>4?a.slice(-4):a})},[]);e.useEffect(()=>{const e=Is.map(e=>os.subscribe(e,s=>{const{preferences:t}=os.getProgress();if(!t.notifications)return;const r=(()=>{switch(e){case"achievement_unlocked":return(e=>e.achievements.map(s=>{var t;const a=null!=(t=s.unlockedAt)?t:e.timestamp;return{id:`${s.id}_${a}`,type:"achievement",title:s.title,description:s.description,points:s.points,timestamp:a,icon:s.icon,rarity:s.rarity,badge:`Conquista • ${s.rarity}`}}))(s);case"level_up":return[As(s)];case"challenge_completed":return[_s(s)];default:return[]}})();a(r)}));return()=>{e.forEach(e=>e())}},[a]);const r=e.useCallback(e=>{t(s=>s.filter(s=>s.id!==e))},[]),i=e.useCallback(()=>{t([])},[]),l=e.useMemo(()=>s.length>0,[s]);return{notifications:s,dismiss:r,clear:i,hasNotifications:l}})();return Z.jsx(_e,{children:Z.jsxs("div",{className:"App",children:[Z.jsx(Cs,{}),Z.jsx(Es,{notifications:s,onDismiss:t})]})})}J(document.getElementById("root")).render(Z.jsx(e.StrictMode,{children:Z.jsx(qs,{})}));export{ae as c,Z as j,te as l,ne as u};
